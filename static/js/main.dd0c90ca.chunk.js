(this.webpackJsonpwikigraph=this.webpackJsonpwikigraph||[]).push([[0],{102:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),a=n.n(i),c=n(19),o=n.n(c),s=(n(84),n(15)),u=n(11),l=n.n(u),d=n(20),p=n(23),f=n(150),h=n(4),g=n(13),b=n.n(g),j=n(7),v=n(10),m=n(3),x=n(8),O=n(28),y=n(64),w=n.n(y),k=n(12),E=n(65),S=n.n(E),M=n(66),C=n.n(M),I=(n(67),function(e){return function(e){return!(!b.a.isPlainObject(e)&&!b.a.isArray(e))&&1===Object.keys(e).length}(e)?function(e){return e[Object.keys(e)[0]]}(e):e}),B=function(e){var t=e.replace("Bestand:","").split(".");return t.length>1&&t.splice(t.length-1),t.join(".")};function D(e){var t=b.a.mapValues(e,(function(e,t,n){return e instanceof Date?e.getTime():"boolean"===typeof e?!0===e?"":void 0:"minsize"===t||"maxsize"===t?parseInt(e):e}));return C.a.stringify(t,{arrayFormat:"separator",arrayFormatSeparator:"|"})}function T(){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(l.a.mark((function e(){var t,n,r,i,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n="https://nl.wikipedia.org/w/api.php?"+D(Object(j.a)(Object(j.a)({},t),{},{action:t.action||"query",format:"json",formatversion:2,origin:"*",errorformat:"raw",utf8:!0})),e.next=4,S()(n,Object(j.a)({method:"GET",mode:"cors",credentials:"omit"},"undefined"===typeof window?{headers:{"User-Agent":"graph-builder (https://github.com/pocket-titan/; jelmargerritsen@gmail.com) wiki.ts"}}:{}));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("".concat(r.status,": ").concat(r.statusText));case 7:return e.next=9,r.json();case 9:if(!(i=e.sent).errors){e.next=12;break}throw new Error(JSON.stringify(i,null,2));case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(e){return Object.entries(e).filter((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return("limit"===n||"limit"===n.slice(1)||"limit"===n.slice(2)||"limit"===n.slice(3))&&"max"!==r&&("number"!==typeof r||r<500)})).map((function(e){var t=Object(v.a)(e,2),n=t[0];t[1];return n}))};function P(){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(l.a.mark((function e(){var t,n,r,i,a,c,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]?o[1]:[],e.next=4,T(t);case 4:if(r=e.sent,n.push(r),!r.continue){e.next=14;break}if(i=Object.keys(r.continue).filter((function(e){return"continue"!==e}))[0],a=r.continue[i],c=z(t).map((function(e){return e.replace("limit","")})),[i.slice(0,1),i.slice(0,2),i.slice(0,3)].some((function(e){return c.includes(e)}))){e.next=14;break}return e.next=13,P(Object(j.a)(Object(j.a)({},t),{},Object(k.a)({},i,a)),n);case 13:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",I(n.flatMap((function(e){return I(b.a.isPlainObject(e)?e.query:e)}))));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=new Map;function N(){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(l.a.mark((function e(){var t,n,r,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=JSON.stringify(t),!A.has(n)){e.next=9;break}return e.prev=3,e.abrupt("return",JSON.parse(A.get(n)));case 7:e.prev=7,e.t0=e.catch(3);case 9:return e.next=11,P(t);case 11:return r=e.sent,A.set(n,JSON.stringify(r)),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[3,7]])})))).apply(this,arguments)}function L(e){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({gbltitle:t,generator:"backlinks",gblnamespace:0,gbllimit:"max",gblredirect:!0});case 2:return n=e.sent,e.abrupt("return",(n?b.a.isPlainObject(n)?[n]:n:[]).map(b.a.iteratee("title")));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(t){var n,r,i,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({action:"opensearch",search:t,namespace:0,limit:5});case 2:return n=e.sent,r=Object(v.a)(n,4),i=r[1],a=r[2],c=r[3],o=b.a.zip(i,a,c).map((function(e){var t=Object(v.a)(e,3);return{title:t[0],summary:t[1],url:t[2]}})),e.abrupt("return",o.map(b.a.iteratee("title")));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({titles:t,generator:"images",gimlimit:"max",prop:["imageinfo","info"],iilimit:"max",iiprop:["url","size","canonicaltitle","mime","thumbmime","user","mediatype","comment","parsedcomment"]});case 2:return n=e.sent,b.a.isPlainObject(n)&&(n=[n]),e.abrupt("return",b.a.uniqBy((n||[]).filter((function(e){return!["Wiktionary-logo.svg","Wikibooks-logo.svg","Commons-logo.svg","1rightarrow blue.svg","Disambig-dark.svg","Nuvola single chevron right.svg","Portal.svg","Crystal Clear app package network.png","Internet-web-browser.svg","Wikivoyage-Logo-v3-icon.svg","Wikisource-logo.svg","Wikinews-logo.svg"].map((function(e){return"Bestand:"+e})).includes(e.title)&&!e.title.startsWith("Bestand:P ")})).map((function(e){return Object(j.a)(Object(j.a)({},b.a.omit(e,"imageinfo")),e.imageinfo[0])})),b.a.iteratee("url")));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({titles:t,prop:"globalusage",gusite:"nlwiki",gunamespace:0,gulimit:"max",guprop:["url"]});case 2:return n=e.sent,e.abrupt("return",n.globalusage);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=new w.a,Y=function(e,t){return e.get(t)},$=function(e,t){e.set(t.id,t)},Q=function(e,t){e.set(t.id,t)},X=function(e){var t,n=Object(O.a)(e.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;return Y(e,r)}}catch(i){n.e(i)}finally{n.f()}},Z=function(){function e(t,n){if(Object(m.a)(this,e),this._vertices=new Map,this._edges=new Map,t)if(t instanceof Map)this._vertices=t;else for(var r=0;r<t.length;r++){var i=t[r];this._vertices.set(i.id,i)}if(n)if(n instanceof Map)this._edges=n;else for(var a=0;a<n.length;a++){var c=n[a];this._edges.set(c.id,c)}}return Object(x.a)(e,[{key:"getVertex",value:function(e){return Y(this._vertices,e)}},{key:"toJSON",value:function(){return{vertices:this.vertices,edges:this.edges}}},{key:"vertices",get:function(){return Object(s.a)(this._vertices.values())}},{key:"edges",get:function(){return Object(s.a)(this._edges.values())}}]),Object(x.a)(e,[{key:"map",value:function(t,n){var r=this,i=new Map,a=new Map;return this._edges.forEach((function(e){var c=Y(r._vertices,e.source),o=Y(r._vertices,e.target),s=t(c,r),u=t(o,r);$(i,s),$(i,u);var l=n?n(e,r):e;l.source=s.id,l.target=u.id,Q(a,l)})),new e(i,a)}},{key:"filter",value:function(t){var n=this,r=new Map,i=new Map;return this._edges.forEach((function(e){var a=Y(n._vertices,e.source),c=Y(n._vertices,e.target),o=t(a),s=t(c);o&&$(r,a),s&&$(r,c),o&&s&&Q(i,e)})),new e(r,i)}},{key:"calculateDegrees",value:function(){var t=new Map(this._vertices),n=new Map(this._edges);return t.forEach((function(e){["degree","inDegree","outDegree"].forEach((function(t){e[t]=0})),e.connections=[]})),n.forEach((function(e){var n=Y(t,e.source),r=Y(t,e.target);n.outDegree+=1,n.degree+=1,r.inDegree+=1,r.degree+=1,n.connections.push(r.id),r.connections.push(n.id)})),new e(t,n)}},{key:"layout",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialAngle:2*Math.PI/t.length,initialRadius:10},i=r.initialAngle,a=void 0===i?2*Math.PI/t.length:i,c=r.initialRadius,o=void 0===c?10:c,s=new Map(this._vertices),u=new Map(this._edges);if(0===s.size)return this;if(!(null===(n=X(s))||void 0===n?void 0:n.degree))throw new Error;var l=0,d=0;return s.forEach((function(e){if(e.degree>l&&(l=e.degree),t.includes(e.id)){var n=a*d,r=o*Math.sqrt(.5+d);e.x=r*Math.cos(n),e.y=r*Math.sin(n),d+=1}})),u.forEach((function(e){if(1===t.filter((function(t){return t===e.source||t===e.target})).length){var n=(t.includes(e.source)?[e.source,e.target]:[e.target,e.source]).map((function(e){return Y(s,e)})),r=Object(v.a)(n,2),i=r[0],a=r[1];if(b.a.isUndefined(a.x)&&b.a.isUndefined(a.y)){var c=b.a.random(0,2*Math.PI),u=o/4+Math.pow(i.degree,2)/Math.pow(l,2)*3,d=K.normal({mean:u,dev:u/6})+a.inDegree/2;a.x=i.x+d*Math.cos(c),a.y=i.y+d*Math.sin(c)}}})),u.forEach((function(e){var t=Y(s,e.source),n=Y(s,e.target);t.x||t.y||(t.x=b.a.random(-o,o,!0),t.y=b.a.random(-o,o,!0)),n.x||n.y||(n.x=b.a.random(-o,o,!0),n.y=b.a.random(-o,o,!0)),e.from={x:t.x,y:t.y},e.to={x:n.x,y:n.y}})),new e(s,u)}}]),e}(),ee=function(e){return{id:e}};function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(d.a)(l.a.mark((function e(t){var n,r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,i,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([[],L(t)]);case 2:return n=e.sent,r=Object(v.a)(n,2),i=r[0],a=r[1],e.abrupt("return",{title:t,links:i,backlinks:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent.reduce((function(e,t){var n=e.vertices,r=e.edges,i=t.title,a=(t.links,t.backlinks);return{vertices:[].concat(Object(s.a)(n),[ee(i)],Object(s.a)(a.map(ee))),edges:[].concat(Object(s.a)(r),Object(s.a)(a.map((function(e){return{id:"".concat(e,"->").concat(i),source:e,target:i}}))))}}),{vertices:[],edges:[]}),r=n.vertices,i=n.edges,a=new Z(r,i).calculateDegrees(),t.length>1&&(a=a.filter((function(e){return e.degree>1})).calculateDegrees()),e.abrupt("return",a.map((function(e){var n=5+b.a.clamp(2*e.degree,0,15),r=t.includes(e.id)?e.id===t[t.length-1]?"#f5540a":"#f5ba17":"#2dd4c7";return Object(j.a)(Object(j.a)({},e),{},{radius:n,color:r})}),(function(e,t){var n=t.getVertex(e.source),r=t.getVertex(e.target),i=.1+Math.min(n.degree,r.degree)/12;return Object(j.a)(Object(j.a)({},e),{},{weight:i})})).layout(t,{initialRadius:1e3}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re,ie=n(69),ae=n(68),ce=Object(ie.a)((re=function(e,t){return{titles:[],graph:void 0,data:void 0,setTitles:function(n){e((function(){return{titles:"function"===typeof n?n(t().titles):n}}))},setGraph:function(t){e((function(){return{graph:t}}))},setData:function(t){e((function(){return{data:t}}))},clicked:void 0,setClicked:function(t){e((function(){return{clicked:t}}))}}},function(e,t,n){return re((function(t){return e(Object(ae.a)(t))}),t,n)})),oe=(n(102),a.a.forwardRef((function(e,t){var n=e.onResultClick,a=void 0===n?function(){}:n,c=e.width,o=void 0===c?"clamp(200px, 25vw, 400px)":c,s=e.height,u=void 0===s?60:s,p=Object(i.useState)(""),f=Object(v.a)(p,2),h=f[0],g=f[1],j=Object(i.useState)([]),m=Object(v.a)(j,2),x=m[0],O=m[1],y=Object(i.useState)(!1),w=Object(v.a)(y,2),k=w[0],E=w[1],S=Object(i.useRef)(b.a.debounce(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,H(t);case 4:n=e.sent,O(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,E(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})));return function(t){return e.apply(this,arguments)}}(),1e3)),M=function(){g(""),O([]),S.current.cancel()};return Object(r.jsxs)("div",{style:{position:"relative",width:o},children:[Object(r.jsxs)("div",{className:"search",style:{height:u,display:"grid",gridTemplateRows:"".concat(u,"px"),gridTemplateColumns:"minmax(0, 1fr) 100px",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"},children:[Object(r.jsx)("input",{ref:t,type:"text",value:h,placeholder:"Search!",style:{fontSize:22},onChange:function(e){var t=e.target.value;g(t),0===t.length?(S.current.cancel(),O([])):S.current(t)},onKeyDown:function(e){switch(e.key){case"Enter":if(0===x.length)return;a(x[0]),M();break;case"Escape":M()}}}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:[h.length>0&&Object(r.jsx)("button",{className:"clear-button",onClick:function(){var e;M(),null===(e=t.current)||void 0===e||e.focus()},children:Object(r.jsx)("i",{className:"icon ion-android-close"})}),k?Object(r.jsx)("button",{disabled:!0,children:Object(r.jsx)("div",{className:"loader"})}):Object(r.jsx)("button",{className:"search-button",onClick:function(e){e.preventDefault(),h.length>0&&S.current.flush()},children:Object(r.jsx)("i",{className:"icon ion-android-search"})})]})]}),Object(r.jsx)("div",{className:"results",style:{zIndex:999,position:"absolute",top:"100%",width:o,overflow:"hidden",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"},children:x.map((function(e){return Object(r.jsx)("div",{className:"result",onClick:function(){a(e),M()},children:e.slice(0,h.length).toLowerCase()===h.toLowerCase()?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontWeight:"bold"},children:e.slice(0,h.length)}),Object(r.jsx)("span",{children:e.slice(h.length)})]}):Object(r.jsx)("span",{children:e})},e)}))})]})}))),se=n(136),ue=n(141),le=n(145),de=n(144),pe=n(138),fe=n(142),he=n(143),ge=n(147),be=n(140);function je(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function ve(e,t){return"desc"===e?function(e,n){return je(e,n,t)}:function(e,n){return-je(e,n,t)}}function me(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var xe=Object(se.a)({root:{color:"red","&:hover":{color:"blue"},"&$active":{color:"green"}},active:{},icon:{color:"inherit !important"}}),Oe=function(e){var t=e.pages,n=e.data,a=e.removeTitle,c=Object(i.useState)("asc"),o=Object(v.a)(c,2),s=o[0],u=o[1],l=Object(i.useState)("index"),d=Object(v.a)(l,2),p=d[0],f=d[1],h=xe(),g=t.map((function(e){var t=e.title;return Object(j.a)({id:t,title:t},(null===n||void 0===n?void 0:n[t])||{in:"?",out:"?",degree:"?"})})),b=[{id:"title",label:"Title",align:"left"},{id:"in",label:"In",align:"right"},{id:"out",label:"Out",align:"right"},{id:"degree",label:"Degree",align:"right"}];return Object(r.jsx)(pe.a,{component:be.a,style:{maxHeight:"40vh",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)",background:"var(--input-background)"},children:Object(r.jsxs)(ue.a,{stickyHeader:!0,style:{color:"hsl(227, 18%, 70%)",width:"unset"},children:[Object(r.jsx)(fe.a,{children:Object(r.jsxs)(he.a,{children:[b.map((function(e,t){return Object(r.jsx)(de.a,{align:e.align||"right",size:"small",style:Object(j.a)({borderBottom:0===g.length?"none":"1.5px solid #5e9a9e",padding:"6px ".concat(t===b.length-1?10:0,"px 6px ").concat(0===t?10:0,"px"),background:"var(--input-background)"},0===t?{maxWidth:125}:{width:50}),children:Object(r.jsxs)(ge.a,{active:p===e.id,direction:p===e.id?s:"asc",onClick:function(){return t=e.id,u(p===t&&"asc"===s?"desc":"asc"),void f(t);var t},classes:{root:h.root,active:h.active,icon:h.icon},style:{color:"hsl(227, 18%, 70%)",fontSize:"1.1em"},children:[e.label,p===e.id?Object(r.jsx)("span",{style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},children:"desc"===s?"sorted descending":"sorted ascending"}):null]})},e.id)})),Object(r.jsx)(de.a,{style:{width:25,padding:0,background:"var(--input-background)",borderBottom:0===g.length?"none":"1.5px solid #5e9a9e"}})]})}),Object(r.jsx)(le.a,{children:me(g,ve(s,p)).map((function(e,t){return Object(r.jsxs)(he.a,{children:[Object(r.jsx)(de.a,{component:"th",scope:"row",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 10px",maxWidth:125,fontSize:"0.9em"},children:e.title}),Object(r.jsx)(de.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",width:50,fontSize:"0.9em"},children:e.in}),Object(r.jsx)(de.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",width:50,fontSize:"0.9em"},children:e.out}),Object(r.jsx)(de.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 10px 6px 0px",width:50,fontSize:"0.9em"},children:e.degree}),Object(r.jsx)(de.a,{style:{padding:0,borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e"},children:Object(r.jsx)("button",{onClick:function(){return a(e.title)},style:{width:22,height:20,fontSize:20,marginTop:2},children:Object(r.jsx)("i",{className:"icon ion-android-close"})})})]},e.title)}))})]})})},ye=n(146),we=function(e){var t=e.vertex,n=t.id,i=t.x,a=t.y,c=(t.color,t.radius);return Object(r.jsx)(ye.a,{position:[i+c,a,1],scaleFactor:2,zIndexRange:[0,100],children:Object(r.jsx)("div",{style:{background:"white",padding:3,borderRadius:2,width:"100%",whiteSpace:"nowrap"},children:n})})},ke=new h.Object3D,Ee=new h.Color,Se=function(e){var t=e.graph,n=t.vertices,a=t.edges,c=ce((function(e){return e.setClicked})),o=Object(i.useState)(),s=Object(v.a)(o,2),u=s[0],l=s[1],d=Object(i.useRef)(),f=(Object(p.c)().camera,Object(p.d)((function(e){n.forEach((function(t,n){ke.position.set(t.x,t.y,0),ke.scale.set(t.radius,t.radius,1),ke.updateMatrix(),e.setMatrixAt(n,ke.matrix),Ee.set(t.color),e.setColorAt(n,Ee)}))}),[n])),g=Object(p.d)((function(e){e.setFromPoints(a.map((function(e){var t=e.from,n=e.to;return[new h.Vector3(t.x,t.y,-1),new h.Vector3(n.x,n.y,-1)]})).flat(1)),e.computeBoundingSphere()}),[a]),b=Object(i.useMemo)((function(){return{edgeColors:Float32Array.from(a.map((function(e,t){return u&&u.id!==e.source&&u.id!==e.target?[[.086,.086,.11],[.086,.086,.11]]:[[.2,.6,.9],[.7,.2,.1]]})).flat(2))}}),[a,u]).edgeColors,j=Object(i.useCallback)((function(e,t){Ee.set(t),f.current.setColorAt(e,Ee),f.current.instanceColor.needsUpdate=!0}),[f]);return Object(i.useEffect)((function(){void 0!==u?(n.forEach((function(e,t){e.connections.includes(u.id)||j(t,"#16161b")})),j(u.instanceId,"#f06")):n.forEach((function(e,t){j(t,e.color)}))}),[u,j]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("instancedMesh",{ref:f,args:[null,null,n.length],onPointerOut:function(e){var t=e.instanceId;if(void 0!==t){var r=n[t];j(t,r.color),l(void 0)}},onPointerMove:function(e){var t=e.instanceId;if(void 0!==t){var r=n[t];void 0!==u?u.instanceId!==t&&(j(u.instanceId,r.color),l({instanceId:t,id:r.id})):l({instanceId:t,id:r.id})}},onPointerUp:function(e){var t=e.instanceId;if(void 0!==t){var r=n[t];c(r)}},children:[Object(r.jsx)("circleBufferGeometry",{args:[1,30]}),Object(r.jsx)("meshBasicMaterial",{})]},n.length),void 0!==u&&Object(r.jsx)(we,{vertex:n[u.instanceId]}),Object(r.jsxs)("lineSegments",{children:[Object(r.jsx)("bufferGeometry",{ref:g,attach:"geometry",children:Object(r.jsx)("bufferAttribute",{ref:d,attachObject:["attributes","color"],args:[b,3]})}),Object(r.jsx)("lineBasicMaterial",{attach:"material",vertexColors:!0,color:"white",transparent:!0,opacity:.3,linewidth:.5})]})]})},Me=n(26),Ce=n(148),Ie=n(149),Be=n(60),De=function(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)/100,vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)/100}},Te=function(){var e=Object(i.useState)(De()),t=Object(v.a)(e,2),n=t[0],r=t[1],a=function(){r(De())};return Object(i.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}})),n},_e=function(e){var t=e.media,n=e.rowHeight,a=e.width,c=e.margin,o=void 0===c?0:c,s=e.onClick,u=void 0===s?function(){}:s,l=Object(i.useCallback)((function(e,t,n,i,c){var s=a/c,l={height:s+"px",width:s*e[1]-o+"px",marginRight:n===i.length-1?0:o+"px",verticalAlign:"bottom",cursor:"pointer"};if("BITMAP"===e[0].mediatype){var d=e,p=B(d[0].title);return Object(r.jsx)("img",{style:l,"data-index":t,src:d[0].src,title:p,alt:d[0].alt,onClick:function(e){e.preventDefault(),u(d[0])}},"img_"+d[0].src+"_"+d[1])}var f=e,h=B(f[0].title);return Object(r.jsx)("video",{controls:!0,style:Object(j.a)(Object(j.a)({},l),{},{objectFit:"cover"}),"data-index":t,src:f[0].src+"#t=0.5",title:h,preload:"metadata",onLoadStart:function(e){e.target.volume=.15},onClick:function(e){e.preventDefault();var t=e.target;t.paused||t.pause(),u(f[0])}},"vid_"+f[0].src+"_"+f[1])}),[o,a,u]),d=Object(i.useMemo)((function(){for(var e=[],i=[],c=0,s=a/n,u=0;u<t.length;u++){var d=t[u],p=d.width/d.height;if(c<=s&&u!==t.length-1)p+=o/d.height,i.push([d,p]),c+=p;else{u===t.length-1&&(i.push([d,p]),c+=p);for(var f=[],h=0;h<i.length;h++)f.push(l(i[h],u-i.length+h,h,i,c));e.push(f),i=[[d,p]],c=p}}var g={display:"flex",marginBottom:o+"px"};return e.map((function(e,t){return Object(r.jsx)("div",{className:"grid-row",style:g,children:e},"row_"+t)}))}),[a,l,t,o,n]);return Object(r.jsx)("div",{className:"grid-container",style:{userSelect:"none"},children:d})},ze=a.a.forwardRef((function(e,t){var n=e.in,i=e.children,a=e.onEnter,c=e.onExited,o=Object(Me.a)(e,["in","children","onEnter","onExited"]),s=Object(Be.b)({from:{opacity:0},to:{opacity:n?1:0},config:{duration:250},onStart:function(){n&&a&&a()},onRest:function(){!n&&c&&c()}});return Object(r.jsx)(Be.a.div,Object(j.a)(Object(j.a)({ref:t,style:Object(j.a)(Object(j.a)({},s),{},{outline:"none"})},o),{},{children:i}))})),Pe=function(e){var t=e.url,n=(e.width,e.height,e.title),a=e.mediatype,c=e.onExited,o=Object(i.useState)([]),s=Object(v.a)(o,2),u=s[0],p=s[1],f=Object(i.useState)(!0),h=Object(v.a)(f,2),g=h[0],b=h[1],j=B(n);return Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n);case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)(Ce.a,{open:g,onClose:function(){return b(!1)},closeAfterTransition:!0,BackdropComponent:Ie.a,BackdropProps:{timeout:250,style:{background:"hsla(0, 0%, 0%, 0.75)"}},style:{display:"flex",alignItems:"flex-start",justifyContent:"center",marginTop:"3vh"},children:Object(r.jsx)(ze,{in:g,onExited:c,children:Object(r.jsxs)(be.a,{style:{paddingLeft:"1.75em",paddingRight:"1.75em",paddingTop:"0.35em",paddingBottom:"1em",width:"50vw",maxHeight:"95vh"},children:[Object(r.jsx)("a",{href:"https://commons.wikimedia.org/wiki/".concat(n.replace("Bestand","File")),target:"_blank",rel:"noreferrer",style:{display:"inline-block",fontSize:"1.75em",fontWeight:"bold",marginTop:"0.5em",marginBottom:"0.5em",color:"rgba(0, 0, 0, 0.87)"},children:j}),"BITMAP"===a&&Object(r.jsx)("img",{src:t,title:n,alt:n,style:{objectFit:"contain",width:"100%",maxHeight:"35vh",objectPosition:"0 0"}}),"VIDEO"===a&&Object(r.jsx)("video",{src:t+"#t=0.5",title:n,controls:!0,preload:"metadata",style:{objectFit:"contain",maxHeight:"35vh"},onLoadStart:function(e){e.target.volume=.15}}),Object(r.jsx)("h3",{style:{marginTop:"0.5em",marginBottom:"0.5em"},children:"File usage"}),Object(r.jsx)("ul",{style:{display:"flex",flexDirection:"column",paddingLeft:0,marginTop:0,marginBottom:"0.5em"},children:u.map((function(e){var t=e.title,n=e.url;return Object(r.jsx)("li",{style:{listStyle:"none"},children:Object(r.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:t})})}))})]})})})},Re=function(e){var t=e.title,n=ce((function(e){return e.setClicked})),a=Object(i.useState)([]),c=Object(v.a)(a,2),o=c[0],s=c[1],u=Object(i.useState)(),p=Object(v.a)(u,2),f=p[0],h=p[1],g=Object(i.useState)(!0),m=Object(v.a)(g,2),x=m[0],O=m[1],y=Te(),w=y.vw,k=y.vh;Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t);case 2:n=e.sent,console.log("images",n),s(n.map((function(e){return b.a.pick(e,"url","width","height","title","mediatype","mime")})).filter((function(e){var t=e.mediatype;return"BITMAP"===t||"VIDEO"===t||"DRAWING"===t})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var E=b.a.clamp(70*w,200,1e3),S=b.a.clamp(20*k,150,250);return Object(r.jsx)(Ce.a,{open:x,onClose:function(){return O(!1)},closeAfterTransition:!0,BackdropComponent:Ie.a,BackdropProps:{timeout:250},style:{display:"flex",alignItems:"flex-start",justifyContent:"center",marginTop:"9vh"},children:Object(r.jsx)(ze,{in:x,onExited:function(){return n(void 0)},children:Object(r.jsxs)(be.a,{style:{paddingLeft:"1.75em",paddingRight:"1.75em",paddingTop:"0.35em",paddingBottom:"0.5em",width:E,maxHeight:"80vh",overflowY:"auto"},children:[Object(r.jsx)("a",{href:"https://nl.wikipedia.org/wiki/".concat(t.split(" ").join("_")),target:"_blank",rel:"noreferrer",style:{display:"inline-block",fontSize:"1.75em",fontWeight:"bold",marginTop:"0.5em",color:"rgba(0, 0, 0, 0.87)"},children:t}),Object(r.jsx)("ul",{style:{display:"flex",flexWrap:"wrap",padding:0},children:Object(r.jsx)(_e,{width:E,rowHeight:S,onClick:function(e){var t=e.src,n=e.width,r=e.height,i=e.title,a=e.mediatype;h({url:t,width:n,height:r,title:i,mediatype:a})},media:o.map((function(e){var t=e.url,n=e.width,r=e.height,i=e.title,a=void 0===i?"":i,c=e.mediatype,o=a.length>15?a.slice(0,15)+"...":a;return Object(j.a)({width:n,height:r,src:t,title:a},"VIDEO"===c?{mediatype:"VIDEO"}:{alt:o,mediatype:"BITMAP"})}))})}),void 0!==f&&Object(r.jsx)(Pe,Object(j.a)(Object(j.a)({},f),{},{onExited:function(){return h(void 0)}}))]})})})},Ae=function(e){var t=e.graph;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ambientLight",{}),Object(r.jsx)("hemisphereLight",{color:"#ffffff",intensity:1}),t&&Object(r.jsx)(Se,{graph:t})]})},Ne=function(){var e=Object(i.useRef)(null),t=ce(),n=t.graph,a=t.titles,c=t.data,o=t.setGraph,u=t.setTitles,g=t.setData,j=t.clicked,v=Object(i.useRef)();return Object(i.useEffect)((function(){0!==a.length?function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(n?a.reduce((function(e,t){var r,i,a,c=n.getVertex(t);return e[t]={in:null!==(r=null===c||void 0===c?void 0:c.inDegree)&&void 0!==r?r:"?",out:null!==(i=null===c||void 0===c?void 0:c.outDegree)&&void 0!==i?i:"?",degree:null!==(a=null===c||void 0===c?void 0:c.degree)&&void 0!==a?a:"?"},e}),{}):{}),e.next=3,te(a);case 3:t=e.sent,o(t),g(a.reduce((function(e,n){var r,i,a,c=t.getVertex(n);return e[n]={in:null!==(r=null===c||void 0===c?void 0:c.inDegree)&&void 0!==r?r:0,out:null!==(i=null===c||void 0===c?void 0:c.outDegree)&&void 0!==i?i:0,degree:null!==(a=null===c||void 0===c?void 0:c.degree)&&void 0!==a?a:0},e}),{}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():o(void 0)}),[a]),Object(r.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[Object(r.jsx)("div",{style:{position:"absolute",zIndex:10,width:"100%",display:"flex",justifyContent:"center",marginTop:15},children:Object(r.jsx)(oe,{ref:e,onResultClick:function(e){a.includes(e)||u((function(t){return[].concat(Object(s.a)(t),[e])}))}})}),Object(r.jsx)("div",{style:{position:"absolute",zIndex:1,top:"9vh",left:15},children:Object(r.jsx)(Oe,{pages:a.map((function(e){return{title:e}})),data:c,removeTitle:function(e){return u((function(t){return b.a.pull(Object(s.a)(t),e)}))}})}),j&&Object(r.jsx)(Re,{title:j.id}),Object(r.jsxs)(p.a,{concurrent:!0,camera:{position:[0,0,32],near:.1,far:64,zoom:2},orthographic:!0,onCreated:function(e){e.gl.outputEncoding=h.sRGBEncoding},onClick:function(t){var n;null===(n=e.current)||void 0===n||n.blur()},children:[Object(r.jsx)(f.a,{ref:v,mouseButtons:{LEFT:h.MOUSE.PAN,MIDDLE:h.MOUSE.MIDDLE,RIGHT:h.MOUSE.ROTATE},noRotate:!0,panSpeed:15}),!1,Object(r.jsx)("gridHelper",{}),Object(r.jsx)("axesHelper",{}),Object(r.jsx)(i.Suspense,{fallback:null,children:Object(r.jsx)(Ae,{graph:n})})]})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,152)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Ne,{})}),document.getElementById("root")),Fe()},84:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.dd0c90ca.chunk.js.map