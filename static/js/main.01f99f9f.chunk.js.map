{"version":3,"sources":["ts/graph.ts","ts/utils.ts","ts/wiki.ts","components/Node.tsx","components/Link.tsx","components/Input/index.tsx","components/Input/Input.tsx","components/Pages.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["chance","Chance","getVertex","vertices","id","get","setVertex","vertex","set","setEdge","edges","edge","firstVertex","keys","key","Graph","_vertices","Map","_edges","this","i","length","values","f","g","forEach","source","target","newSource","newTarget","newEdge","predicate","keepSource","keepTarget","outDegree","degree","inDegree","titles","initialAngle","Math","PI","sqrt","initialRadius","size","Error","maxDegree","includes","angle","radius","x","cos","y","sin","filter","title","map","titleVertex","me","_","random","normal","mean","dev","from","to","unwrapIfSingle","obj","isPlainObject","isArray","Object","isSingle","unwrap","stringifyParams","params","parsed","mapValues","value","Date","getTime","undefined","parseInt","qs","stringify","arrayFormat","arrayFormatSeparator","request","a","url","action","format","formatversion","origin","errorformat","utf8","fetch","method","mode","credentials","window","headers","response","ok","status","statusText","json","errors","JSON","getCustomLimits","entries","slice","batchRequest","results","res","push","continue","continueType","continueKey","prefixes","replace","some","prefix","flatMap","result","query","Cache","api","cacheKey","has","parse","getBacklinks","gbltitle","generator","gblnamespace","gbllimit","gblredirect","backlinks","iteratee","search","namespace","limit","summaries","urls","pages","zip","summary","Node","label","position","color","initialColor","useState","hovered","setHovered","useSpring","onPointerOver","e","stopPropagation","onPointerOut","attach","args","meshStandardMaterial","Html","scaleFactor","zIndexRange","style","background","padding","borderRadius","Link","lineWidth","Line","points","vertexColors","Input","React","forwardRef","ref","onResultClick","width","height","setValue","setResults","loading","setLoading","debouncedAutocomplete","useRef","debounce","input","wiki","resetInput","current","cancel","className","display","gridTemplateRows","gridTemplateColumns","boxShadow","type","placeholder","fontSize","onChange","onKeyDown","event","flexDirection","justifyContent","onClick","focus","disabled","preventDefault","flush","zIndex","top","overflow","toLowerCase","fontWeight","descendingComparator","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","el","index","sort","useStyles","makeStyles","root","active","icon","Pages","data","removeTitle","setOrder","setOrderBy","styles","rows","in","out","columns","align","TableContainer","component","Paper","maxHeight","Table","stickyHeader","TableHead","TableRow","column","TableCell","borderBottom","maxWidth","TableSortLabel","direction","classes","border","clip","margin","TableBody","row","scope","marginTop","makeVertex","buildGraph","Promise","all","links","reduce","graph","calculateDegrees","clamp","weight","min","layout","Scene","intensity","App","inputRef","setGraph","setTitles","setData","useEffect","main","console","log","oldTitles","left","pull","camera","near","far","zoom","orthographic","blur","TrackballControls","mouseButtons","LEFT","THREE","PAN","MIDDLE","RIGHT","ROTATE","noRotate","panSpeed","Stats","fallback","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01f99f9f.chunk.js","sourcesContent":["import _ from \"lodash\";\nimport Chance from \"chance\";\nconst chance = new Chance();\n\nexport type Id = string;\n\nexport type Vertex = {\n  id: Id;\n};\n\nexport type Edge = {\n  id: Id;\n  source: Id;\n  target: Id;\n};\n\nconst getVertex = <T extends Vertex>(vertices: Map<Id, T>, id: Id) => vertices.get(id)!;\n\nconst setVertex = <T extends Vertex>(vertices: Map<Id, T>, vertex: T) =>\n  void vertices.set(vertex.id, vertex);\n\nconst getEdge = <U extends Vertex>(edges: Map<Id, U>, id: Id) => edges.get(id)!;\n\nconst setEdge = <U extends Edge>(edges: Map<Id, U>, edge: U) =>\n  void edges.set(edge.id, edge);\n\nconst firstVertex = <T extends Vertex>(vertices: Map<Id, T>) => {\n  for (let key of vertices.keys()) {\n    return getVertex(vertices, key);\n  }\n};\n\nexport type Degrees = {\n  degree: number;\n  inDegree: number;\n  outDegree: number;\n};\n\nexport type Position = {\n  x: number;\n  y: number;\n};\n\nclass Graph<T extends Vertex = Vertex, U extends Edge = Edge> {\n  private _vertices = new Map<Id, T>();\n  private _edges = new Map<Id, U>();\n\n  get vertices() {\n    return [...this._vertices.values()];\n  }\n\n  get edges() {\n    return [...this._edges.values()];\n  }\n\n  getVertex(id: Id) {\n    return getVertex(this._vertices, id);\n  }\n\n  toJSON() {\n    return {\n      vertices: this.vertices,\n      edges: this.edges,\n    };\n  }\n\n  constructor(vertices?: T[] | Map<Id, T>, edges?: U[] | Map<Id, U>) {\n    if (vertices) {\n      if (vertices instanceof Map) {\n        this._vertices = vertices;\n      } else {\n        for (let i = 0; i < vertices.length; i++) {\n          let vertex = vertices[i];\n          this._vertices.set(vertex.id, vertex);\n        }\n      }\n    }\n\n    if (edges) {\n      if (edges instanceof Map) {\n        this._edges = edges;\n      } else {\n        for (let i = 0; i < edges.length; i++) {\n          let edge = edges[i];\n          this._edges.set(edge.id, edge);\n        }\n      }\n    }\n  }\n\n  map<A extends Vertex, B extends Edge = U>(\n    f: (vertex: T & { [key: string]: any }, graph: this) => A,\n    g?: (edge: U & { [key: string]: any }, graph: this) => B\n  ) {\n    let [vertices, edges] = [new Map(), new Map()];\n\n    this._edges.forEach((edge) => {\n      let source = getVertex(this._vertices, edge.source);\n      let target = getVertex(this._vertices, edge.target);\n\n      let newSource = f(source, this);\n      let newTarget = f(target, this);\n      setVertex(vertices, newSource);\n      setVertex(vertices, newTarget);\n\n      let newEdge = g ? g(edge, this) : edge;\n      newEdge.source = newSource.id;\n      newEdge.target = newTarget.id;\n      setEdge(edges, newEdge);\n    });\n\n    return new Graph<A, B>(vertices, edges);\n  }\n\n  filter(predicate: (vertex: T) => boolean) {\n    let [vertices, edges] = [new Map<Id, T>(), new Map<Id, U>()];\n\n    this._edges.forEach((edge) => {\n      let source = getVertex(this._vertices, edge.source);\n      let target = getVertex(this._vertices, edge.target);\n\n      let keepSource = predicate(source);\n      let keepTarget = predicate(target);\n\n      if (keepSource) {\n        setVertex(vertices, source);\n      }\n\n      if (keepTarget) {\n        setVertex(vertices, target);\n      }\n\n      if (keepSource && keepTarget) {\n        setEdge(edges, edge);\n      }\n    });\n\n    return new Graph(vertices, edges);\n  }\n\n  calculateDegrees(): Graph<T & Degrees, U> {\n    let [vertices, edges] = [\n      new Map<Id, T & Degrees>(this._vertices as any),\n      new Map(this._edges),\n    ];\n\n    vertices.forEach((vertex) => {\n      ([\"degree\", \"inDegree\", \"outDegree\"] as const).forEach((key) => {\n        vertex[key] = 0;\n      });\n    });\n\n    edges.forEach((edge) => {\n      let source = getVertex(vertices, edge.source);\n      let target = getVertex(vertices, edge.target);\n\n      source.outDegree += 1;\n      source.degree += 1;\n      target.inDegree += 1;\n      target.degree += 1;\n    });\n\n    return new Graph<T & Degrees, U>(vertices, edges);\n  }\n\n  layout(\n    titles: string[],\n    {\n      initialAngle = Math.PI * (3 - Math.sqrt(5)),\n      initialRadius = 10,\n    }: {\n      initialAngle?: number;\n      initialRadius?: number;\n    } = {\n      initialAngle: Math.PI * (3 - Math.sqrt(5)),\n      initialRadius: 10,\n    }\n  ): T extends Degrees\n    ? Graph<T & Position, U & { from: Position; to: Position }>\n    : never {\n    let [vertices, edges] = [\n      new Map<Id, T & Degrees & Partial<Position>>(this._vertices as any),\n      new Map<Id, U & Partial<{ from: Position; to: Position }>>(this._edges),\n    ];\n\n    if (vertices.size === 0) {\n      return this as any;\n    }\n\n    if (!firstVertex(vertices)?.degree) {\n      throw new Error();\n    }\n\n    let maxDegree = 0;\n    let i = 0;\n\n    vertices.forEach((vertex) => {\n      if (vertex.degree > maxDegree) {\n        maxDegree = vertex.degree;\n      }\n\n      if (titles.includes(vertex.id)) {\n        let [angle, radius] = [initialAngle * i, initialRadius * Math.sqrt(0.5 + i)];\n\n        vertex.x = radius * Math.cos(angle);\n        vertex.y = radius * Math.sin(angle);\n        i += 1;\n      }\n    });\n\n    edges.forEach((edge) => {\n      // We're basing the layout of our nodes on their first link to a titleVertex,\n      // so bail out if we're dealing with none or only titleVertices\n      if (\n        titles.filter((title) => title === edge.source || title === edge.target)\n          .length !== 1\n      ) {\n        return;\n      }\n\n      let [titleVertex, me] = (titles.includes(edge.source)\n        ? [edge.source, edge.target]\n        : [edge.target, edge.source]\n      ).map((x) => getVertex(vertices, x));\n\n      if (!me.x && !me.y) {\n        let [angle, radius] = [\n          _.random(0, 2 * Math.PI),\n          chance.normal({\n            mean: initialRadius / 4 + (titleVertex.degree ** 2 / maxDegree ** 2) * 3,\n            dev: 0.15,\n          }) +\n            me.inDegree / 2,\n        ];\n\n        me.x = titleVertex.x! + radius * Math.cos(angle);\n        me.y = titleVertex.y! + radius * Math.sin(angle);\n      }\n    });\n\n    edges.forEach((edge) => {\n      let source = getVertex(vertices, edge.source);\n      let target = getVertex(vertices, edge.target);\n\n      if (!source.x && !source.y) {\n        source.x = _.random(-initialRadius, initialRadius, true);\n        source.y = _.random(-initialRadius, initialRadius, true);\n      }\n\n      if (!target.x && !target.y) {\n        target.x = _.random(-initialRadius, initialRadius, true);\n        target.y = _.random(-initialRadius, initialRadius, true);\n      }\n\n      edge.from = { x: source.x!, y: source.y! };\n      edge.to = { x: target.x!, y: target.y! };\n    });\n\n    return new Graph(\n      vertices as Map<Id, T & Degrees & Position>,\n      edges as Map<Id, U & { from: Position; to: Position }>\n    ) as any;\n  }\n}\n\nexport default Graph;\n","import G from \"generatorics\";\nimport _ from \"lodash\";\n\nexport const isSingle = (obj: any[] | { [key: string]: any }) =>\n  !(_.isPlainObject(obj) || _.isArray(obj)) ? false : Object.keys(obj).length === 1;\n\nexport const unwrap = (obj: object) => obj[Object.keys(obj)[0]];\n\nexport const unwrapIfSingle = (obj: any) => (isSingle(obj) ? unwrap(obj) : obj);\n\nexport const merge = (object: any, ...sources: any[]) => {\n  return _.mergeWith(object, ...sources, (objValue, srcValue) => {\n    if (_.isArray(objValue)) {\n      return objValue.concat(srcValue);\n    }\n  });\n};\n\nexport const permutations = function* <T>(arr: T[], size = arr.length): Generator<T[]> {\n  return yield* G.permutation(arr, size);\n};\n","import fetch from \"cross-fetch\";\nimport qs from \"query-string\";\nimport _ from \"lodash\";\nimport { unwrapIfSingle } from \"./utils\";\n\nlet props = [\n  \"categories\",\n  \"categoryinfo\",\n  \"cirrusbuilddoc\",\n  \"cirruscompsuggestbuilddoc\",\n  \"cirrusdoc\",\n  \"contributors\",\n  \"deletedrevisions\",\n  \"duplicatefiles\",\n  \"extlinks\",\n  \"extracts\",\n  \"fileusage\",\n  \"globalusage\",\n  \"imageinfo\",\n  \"images\",\n  \"info\",\n  \"iwlinks\",\n  \"langlinks\",\n  \"links\",\n  \"linkshere\",\n  \"pageimages\",\n  \"pageprops\",\n  \"pageterms\",\n  \"pageviews\",\n  \"redirects\",\n  \"revisions\",\n  \"stashimageinfo\",\n  \"templates\",\n  \"transcludedin\",\n  \"transcodestatus\",\n  \"videoinfo\",\n  \"wbentityusage\",\n  \"flowinfo\",\n  \"description\",\n  \"mapdata\",\n] as const;\n\ntype Prop = typeof props[number];\n\nlet lists = [\n  \"abusefilters\",\n  \"abuselog\",\n  \"allcategories\",\n  \"alldeletedrevisions\",\n  \"allfileusages\",\n  \"allimages\",\n  \"alllinks\",\n  \"allpages\",\n  \"allredirects\",\n  \"allrevisions\",\n  \"alltransclusions\",\n  \"allusers\",\n  \"backlinks\",\n  \"betafeatures\",\n  \"blocks\",\n  \"categorymembers\",\n  \"centralnoticeactivecampaigns\",\n  \"centralnoticelogs\",\n  \"checkuser\",\n  \"checkuserlog\",\n  \"codecomments\",\n  \"codepaths\",\n  \"coderevisions\",\n  \"codetags\",\n  \"embeddedin\",\n  \"extdistrepos\",\n  \"exturlusage\",\n  \"filearchive\",\n  \"gadgetcategories\",\n  \"gadgets\",\n  \"globalallusers\",\n  \"globalblocks\",\n  \"globalgroups\",\n  \"imageusage\",\n  \"iwbacklinks\",\n  \"langbacklinks\",\n  \"linterrors\",\n  \"logevents\",\n  \"messagecollection\",\n  \"mostviewed\",\n  \"mystashedfiles\",\n  \"pagepropnames\",\n  \"pageswithprop\",\n  \"prefixsearch\",\n  \"protectedtitles\",\n  \"querypage\",\n  \"random\",\n  \"recentchanges\",\n  \"search\",\n  \"tags\",\n  \"threads\",\n  \"usercontribs\",\n  \"users\",\n  \"watchlist\",\n  \"watchlistraw\",\n  \"wblistentityusage\",\n  \"wikisets\",\n  \"deletedrevs\",\n  \"extdistbranches\",\n  \"mmsites\",\n  \"readinglistentries\",\n] as const;\n\ntype List = typeof lists[number];\n\nlet generator = [\n  \"allcategories\",\n  \"alldeletedrevisions\",\n  \"allfileusages\",\n  \"allimages\",\n  \"alllinks\",\n  \"allpages\",\n  \"allredirects\",\n  \"allrevisions\",\n  \"alltransclusions\",\n  \"backlinks\",\n  \"categories\",\n  \"categorymembers\",\n  \"deletedrevisions\",\n  \"duplicatefiles\",\n  \"embeddedin\",\n  \"exturlusage\",\n  \"fileusage\",\n  \"images\",\n  \"imageusage\",\n  \"iwbacklinks\",\n  \"langbacklinks\",\n  \"links\",\n  \"linkshere\",\n  \"messagecollection\",\n  \"mostviewed\",\n  \"pageswithprop\",\n  \"prefixsearch\",\n  \"protectedtitles\",\n  \"querypage\",\n  \"random\",\n  \"recentchanges\",\n  \"redirects\",\n  \"revisions\",\n  \"search\",\n  \"templates\",\n  \"transcludedin\",\n  \"watchlist\",\n  \"watchlistraw\",\n  \"wblistentityusage\",\n  \"readinglistentries\",\n] as const;\n\ntype Generator = typeof generator[number];\n\ntype Params = {\n  titles?: string | string[];\n  pageids?: number[];\n  revids?: number[];\n  prop?: Prop | Prop[];\n  list?: List | List[];\n  generator?: Generator | Generator[];\n  iwurl?: boolean;\n  redirects?: boolean | string;\n  converttitles?: boolean;\n  [key: string]: any;\n};\n\nfunction stringifyParams(params: { [key: string]: any }) {\n  let parsed = _.mapValues(params, (value, key, obj) => {\n    if (value instanceof Date) {\n      return value.getTime();\n    }\n\n    if (typeof value === \"boolean\") {\n      return value === true ? \"\" : undefined;\n    }\n\n    if (key === \"minsize\" || key === \"maxsize\") {\n      return parseInt(value);\n    }\n\n    return value;\n  });\n\n  return qs.stringify(parsed, {\n    arrayFormat: \"separator\",\n    arrayFormatSeparator: \"|\",\n  });\n}\n\nexport async function request(params: Params = {}) {\n  const url =\n    \"https://nl.wikipedia.org/w/api.php?\" +\n    stringifyParams({\n      ...params,\n      action: params.action || \"query\",\n      format: \"json\",\n      formatversion: 2,\n      origin: \"*\",\n      errorformat: \"raw\",\n      utf8: true,\n    });\n\n  const response = await fetch(url, {\n    method: \"GET\",\n    mode: \"cors\",\n    credentials: \"omit\",\n    ...(typeof window === \"undefined\"\n      ? {\n          headers: {\n            \"User-Agent\":\n              \"graph-builder (https://github.com/pocket-titan/; jelmargerritsen@gmail.com) wiki.ts\",\n          },\n        }\n      : {}),\n  });\n\n  if (!response.ok) {\n    throw new Error(`${response.status}: ${response.statusText}`);\n  }\n\n  let json = await response.json();\n\n  if (json.errors) {\n    throw new Error(JSON.stringify(json, null, 2));\n  }\n\n  return json;\n}\n\nconst getCustomLimits = (params: Params): string[] => {\n  let keys = Object.entries(params)\n    .filter(\n      ([key, value]) =>\n        (key === \"limit\" ||\n          key.slice(1) === \"limit\" ||\n          key.slice(2) === \"limit\" ||\n          key.slice(3) === \"limit\") &&\n        value !== \"max\" &&\n        (typeof value === \"number\" ? value < 500 : true)\n    )\n    .map(([key, value]) => key);\n\n  return keys;\n};\n\nasync function batchRequest(params: Params = {}, results: any[] = []): Promise<any[]> {\n  let res = await request(params);\n  results.push(res);\n\n  if (res.continue) {\n    let continueType = Object.keys(res.continue).filter((key) => key !== \"continue\")[0];\n    let continueKey = res.continue[continueType];\n\n    let prefixes = getCustomLimits(params).map((x) => x.replace(\"limit\", \"\"));\n\n    if (\n      ![\n        continueType.slice(0, 1),\n        continueType.slice(0, 2),\n        continueType.slice(0, 3),\n      ].some((prefix) => prefixes.includes(prefix))\n    ) {\n      return await batchRequest({ ...params, [continueType]: continueKey }, results);\n    }\n  }\n\n  return unwrapIfSingle(\n    results.flatMap((result) =>\n      unwrapIfSingle(_.isPlainObject(result) ? result.query : result)\n    )\n  );\n}\n\nconst Cache = new Map<string, string>();\n\nexport async function api(params: Params = {}) {\n  let cacheKey = JSON.stringify(params);\n\n  if (Cache.has(cacheKey)) {\n    return JSON.parse(Cache.get(cacheKey)!);\n  }\n\n  let results = await batchRequest(params);\n  Cache.set(cacheKey, JSON.stringify(results));\n  return results;\n}\n\ntype BlParams = Prefix<\n  \"bl\",\n  {\n    title?: string;\n    pageid?: number;\n    namespace?: Namespace | Namespace[] | \"*\";\n    dir?: \"ascending\" | \"descending\";\n    filterredir?: \"all\" | \"nonredirects\" | \"redirects\";\n    limit?: number | \"max\";\n    redirect?: boolean;\n  }\n>;\n\ntype Namespace =\n  | 0\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15\n  | 90\n  | 91\n  | 92\n  | 93\n  | 100\n  | 101\n  | 102\n  | 103\n  | 104\n  | 105\n  | 106\n  | 107\n  | 486\n  | 487\n  | 828\n  | 829\n  | 1198\n  | 1199\n  | 2300\n  | 2301\n  | 2302\n  | 2303\n  | 2600\n  | 5500\n  | 5501;\n\ntype Parameters = {\n  titles?: string[];\n  pageids?: number[];\n  prop?: Prop | Prop[];\n  list?: List | List[];\n  generator?:\n    | \"allpages\"\n    | \"allimages\"\n    | \"alllinks\"\n    | \"linkshere\"\n    | \"backlinks\"\n    | \"links\"\n    | \"search\";\n  redirects?: boolean;\n  namespace?: Namespace;\n  limit?: number | \"max\";\n  show?: \"redirect\" | \"!redirect\" | [\"redirect\", \"!redirect\"];\n  title?: string;\n  pageid?: number | string;\n  dir?: \"ascending\" | \"descending\";\n  filterredir?: \"all\" | \"nonredirects\" | \"redirects\";\n  redirect?: boolean;\n  from?: string;\n  to?: string;\n  prefix?: string;\n  sort?: \"name\" | \"timestamp\";\n  start?: Date;\n  end?: Date;\n  minsize?: number;\n  maxsize?: number;\n};\n\ntype Prefix<A extends string, B extends { [key: string]: any }> = keyof B extends string\n  ? {\n      [K in keyof B as `${A}${K}`]: B[K];\n    }\n  : never;\n\ntype AllParams = {\n  title?: string;\n  pageid?: number;\n  namespace?: Namespace | Namespace[] | \"*\";\n  dir?: \"ascending\" | \"descending\";\n  filterredir?: \"all\" | \"nonredirects\" | \"redirects\";\n  limit?: number | \"max\";\n  redirect?: boolean;\n  prop?: (\"pageid\" | \"title\" | \"redirect\")[];\n  show?: \"redirect\" | \"!redirect\" | (\"redirect\" | \"!redirect\")[];\n};\n\nexport async function getLinks(title: string): Promise<string[]> {\n  let links = await api({\n    titles: title,\n    generator: \"links\",\n    gplnamespace: 0,\n    gpllimit: \"max\",\n  });\n\n  return (_.isPlainObject(links) ? [links] : links)\n    .filter((link) => !link.missing)\n    .map(_.iteratee(\"title\"));\n}\n\nexport async function getBacklinks(title: string): Promise<string[]> {\n  // For some reason, blredirect: true does not work with list: 'backlinks',\n  // but gblredirect: true with generator: 'backlinks' _does_, so we use the latter /shrug\n  let backlinks = await api({\n    gbltitle: title,\n    generator: \"backlinks\",\n    gblnamespace: 0,\n    gbllimit: \"max\",\n    gblredirect: true,\n  });\n\n  return (_.isPlainObject(backlinks) ? [backlinks] : backlinks).map(_.iteratee(\"title\"));\n}\n\nexport async function search(query: string): Promise<string[]> {\n  let results: [string, string[], string[], string[]] = await api({\n    action: \"opensearch\",\n    search: query,\n    namespace: 0,\n    limit: 5,\n  });\n\n  let [, titles, summaries, urls] = results;\n\n  let pages = _.zip(titles, summaries, urls).map(([title, summary, url]) => ({\n    title,\n    summary,\n    url,\n  }));\n\n  return pages.map(_.iteratee(\"title\"));\n}\n","import React, { useState } from \"react\";\nimport { animated, useSpring } from \"react-spring/three\";\nimport { Html } from \"@react-three/drei\";\n\nconst Node = ({\n  label,\n  radius = 40,\n  position = [0, 0],\n  color: initialColor = \"#4adfd2\",\n}: {\n  label: string;\n  radius?: number;\n  position?: [number, number];\n  color?: string;\n}) => {\n  const [hovered, setHovered] = useState(false);\n\n  const { color } = useSpring({\n    color: hovered ? \"#ff0066\" : initialColor,\n  });\n\n  return (\n    <group\n      position={[...position, 0]}\n      onPointerOver={(e) => {\n        e.stopPropagation();\n        setHovered(true);\n      }}\n      onPointerOut={(e) => {\n        e.stopPropagation();\n        setHovered(false);\n      }}\n    >\n      <mesh>\n        <circleBufferGeometry attach=\"geometry\" args={[radius, 40]} />\n        <animated.meshStandardMaterial attach=\"material\" color={color} />\n      </mesh>\n      {hovered && (\n        <Html position={[radius, 0, 0]} scaleFactor={2} zIndexRange={[0, 100]}>\n          <div style={{ background: \"white\", padding: 3, borderRadius: 2 }}>{label}</div>\n        </Html>\n      )}\n    </group>\n  );\n};\n\nexport default Node;\n","import React from \"react\";\nimport { Line } from \"@react-three/drei\";\n\nconst Link = ({\n  from,\n  to,\n  lineWidth = 1,\n  color = \"white\",\n}: {\n  from: [number, number];\n  to: [number, number];\n  lineWidth?: number;\n  color?: string;\n}) => {\n  return (\n    <Line\n      points={[\n        [...from, -1],\n        [...to, -1],\n      ]}\n      color={color}\n      lineWidth={lineWidth}\n      vertexColors={[\n        [0.2, 0.6, 0.9],\n        [0.7, 0.2, 0.1],\n      ]}\n    />\n  );\n};\n\nexport default Link;\n","import Input from \"./Input\";\n\nexport default Input;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport * as wiki from \"ts/wiki\";\nimport \"./Input.css\";\n\nconst Input = React.forwardRef<\n  HTMLInputElement,\n  {\n    onResultClick?: (result: string) => void;\n    width?: number;\n    height?: number;\n  }\n>(({ onResultClick = () => {}, width = 350, height = 55 }, ref) => {\n  const [value, setValue] = useState(\"\");\n  const [results, setResults] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const debouncedAutocomplete = useRef(\n    _.debounce(async (input: string) => {\n      setLoading(true);\n\n      try {\n        let results = await wiki.search(input);\n        setResults(results);\n      } catch {\n      } finally {\n        setLoading(false);\n      }\n    }, 1000)\n  );\n\n  const resetInput = () => {\n    setValue(\"\");\n    setResults([]);\n    debouncedAutocomplete.current.cancel();\n  };\n\n  return (\n    <div style={{ position: \"relative\", width: 350 }}>\n      <div\n        className=\"search\"\n        style={{\n          height,\n          display: \"grid\",\n          gridTemplateRows: `${height}px`,\n          gridTemplateColumns: \"minmax(0, 1fr) 100px\",\n          boxShadow: \"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)\",\n        }}\n      >\n        <input\n          ref={ref}\n          type=\"text\"\n          value={value}\n          placeholder=\"Search!\"\n          style={{ fontSize: 22 }}\n          onChange={({ target: { value } }) => {\n            setValue(value);\n\n            if (value.length === 0) {\n              debouncedAutocomplete.current.cancel();\n              setResults([]);\n            } else {\n              debouncedAutocomplete.current(value);\n            }\n          }}\n          onKeyDown={(event) => {\n            switch (event.key) {\n              case \"Enter\": {\n                if (results.length === 0) {\n                  return;\n                }\n\n                onResultClick(results[0]);\n                resetInput();\n                break;\n              }\n              case \"Escape\": {\n                resetInput();\n                break;\n              }\n            }\n          }}\n        />\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"flex-end\",\n          }}\n        >\n          {value.length > 0 && (\n            <button\n              className=\"clear-button\"\n              onClick={() => {\n                resetInput();\n                (ref as React.MutableRefObject<HTMLInputElement>).current?.focus();\n              }}\n            >\n              <i className=\"icon ion-android-close\" />\n            </button>\n          )}\n          {loading ? (\n            <button disabled={true}>\n              <div className=\"loader\" />\n            </button>\n          ) : (\n            <button\n              className=\"search-button\"\n              onClick={(event) => {\n                event.preventDefault();\n\n                if (value.length > 0) {\n                  debouncedAutocomplete.current.flush();\n                }\n              }}\n            >\n              <i className=\"icon ion-android-search\" />\n            </button>\n          )}\n        </div>\n      </div>\n      <div\n        className=\"results\"\n        style={{\n          zIndex: 999,\n          position: \"absolute\",\n          top: \"100%\",\n          width,\n          overflow: \"hidden\",\n          boxShadow: \"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)\",\n        }}\n      >\n        {results.map((result) => (\n          <div\n            key={result}\n            className=\"result\"\n            onClick={() => {\n              onResultClick(result);\n              resetInput();\n            }}\n          >\n            {result.slice(0, value.length).toLowerCase() === value.toLowerCase() ? (\n              <>\n                <span\n                  style={{\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  {result.slice(0, value.length)}\n                </span>\n                <span>{result.slice(value.length)}</span>\n              </>\n            ) : (\n              <span>{result}</span>\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n\nexport default Input;\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\nimport Paper from \"@material-ui/core/Paper\";\nimport type { Data } from \"../App\";\n\ntype Page = {\n  title: string;\n};\n\ntype Column = {\n  id: string;\n  label: string;\n  align?: \"left\" | \"right\" | \"justify\" | \"center\";\n};\n\ntype Order = \"asc\" | \"desc\";\n\nfunction descendingComparator<T>(a: T, b: T, orderBy: keyof T) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction getComparator<Key extends string>(\n  order: Order,\n  orderBy: Key\n): (a: any, b: any) => number {\n  return order === \"desc\"\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort<T>(array: T[], comparator: (a: T, b: T) => number) {\n  const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\n\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n\n  return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles({\n  root: {\n    color: \"red\",\n    \"&:hover\": {\n      color: \"blue\",\n    },\n    \"&$active\": {\n      color: \"green\",\n    },\n  },\n  active: {},\n  icon: {\n    color: \"inherit !important\",\n  },\n});\n\ntype Row = {\n  id: string;\n  title: string;\n} & Data[keyof Data];\n\nconst Pages = ({\n  pages,\n  data,\n  removeTitle,\n}: {\n  pages: Page[];\n  data?: Data;\n  removeTitle: (title: string) => void;\n}) => {\n  const [order, setOrder] = useState<Order>(\"asc\");\n  const [orderBy, setOrderBy] = useState<string>(\"index\");\n  const styles = useStyles();\n\n  const sort = (key: string) => {\n    const isAsc = orderBy === key && order === \"asc\";\n    setOrder(isAsc ? \"desc\" : \"asc\");\n    setOrderBy(key);\n  };\n\n  const rows: Row[] = pages.map(({ title }) => ({\n    id: title,\n    title,\n    ...(data?.[title] || { in: 0, out: 0, degree: 0 }),\n  }));\n\n  const columns: Column[] = [\n    {\n      id: \"title\",\n      label: \"Title\",\n      align: \"left\",\n    },\n    {\n      id: \"in\",\n      label: \"In\",\n      align: \"right\",\n    },\n    {\n      id: \"out\",\n      label: \"Out\",\n      align: \"right\",\n    },\n    {\n      id: \"degree\",\n      label: \"Degree\",\n      align: \"right\",\n    },\n  ];\n\n  return (\n    <TableContainer\n      component={Paper}\n      style={{\n        maxHeight: \"40vh\",\n        boxShadow: \"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)\",\n        background: \"var(--input-background)\",\n        // width: 275,\n      }}\n    >\n      <Table stickyHeader style={{ color: \"hsl(227, 18%, 70%)\", width: \"unset\" }}>\n        <TableHead>\n          <TableRow>\n            {columns.map((column, i) => (\n              <TableCell\n                key={column.id}\n                align={column.align || \"right\"}\n                size=\"small\"\n                style={{\n                  borderBottom: rows.length === 0 ? \"none\" : \"1.5px solid #5e9a9e\",\n                  padding: `6px ${i === columns.length - 1 ? 10 : 0}px 6px ${\n                    i === 0 ? 10 : 0\n                  }px`,\n                  background: \"var(--input-background)\",\n                  ...{\n                    maxWidth: i !== 0 ? 80 : 100,\n                  },\n                }}\n              >\n                <TableSortLabel\n                  active={orderBy === column.id}\n                  direction={orderBy === column.id ? order : \"asc\"}\n                  onClick={() => sort(column.id)}\n                  classes={{\n                    root: styles.root,\n                    active: styles.active,\n                    icon: styles.icon,\n                  }}\n                  style={{\n                    color: \"hsl(227, 18%, 70%)\",\n                  }}\n                >\n                  {column.label}\n                  {orderBy === column.id ? (\n                    <span\n                      style={{\n                        border: 0,\n                        clip: \"rect(0 0 0 0)\",\n                        height: 1,\n                        margin: -1,\n                        overflow: \"hidden\",\n                        padding: 0,\n                        position: \"absolute\",\n                        top: 20,\n                        width: 1,\n                      }}\n                    >\n                      {order === \"desc\" ? \"sorted descending\" : \"sorted ascending\"}\n                    </span>\n                  ) : null}\n                </TableSortLabel>\n              </TableCell>\n            ))}\n            <TableCell\n              style={{\n                width: 25,\n                padding: 0,\n                background: \"var(--input-background)\",\n                borderBottom: rows.length === 0 ? \"none\" : \"1.5px solid #5e9a9e\",\n              }}\n            ></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {stableSort(rows, getComparator(order, orderBy)).map((row, i) => (\n            <TableRow key={row.title}>\n              <TableCell\n                component=\"th\"\n                scope=\"row\"\n                size=\"small\"\n                style={{\n                  color: \"hsl(227, 18%, 75%)\",\n                  borderBottom: i === rows.length - 1 ? \"none\" : \"1.5px solid #5e9a9e\",\n                  padding: \"6px 0px 6px 10px\",\n                  maxWidth: 100,\n                }}\n              >\n                {row.title}\n              </TableCell>\n              <TableCell\n                align=\"right\"\n                size=\"small\"\n                style={{\n                  color: \"hsl(227, 18%, 75%)\",\n                  borderBottom: i === rows.length - 1 ? \"none\" : \"1.5px solid #5e9a9e\",\n                  padding: \"6px 0px 6px 0px\",\n                  maxWidth: 80,\n                }}\n              >\n                {row.in}\n              </TableCell>\n              <TableCell\n                align=\"right\"\n                size=\"small\"\n                style={{\n                  color: \"hsl(227, 18%, 75%)\",\n                  borderBottom: i === rows.length - 1 ? \"none\" : \"1.5px solid #5e9a9e\",\n                  padding: \"6px 0px 6px 0px\",\n                  maxWidth: 80,\n                }}\n              >\n                {row.out}\n              </TableCell>\n              <TableCell\n                align=\"right\"\n                size=\"small\"\n                style={{\n                  color: \"hsl(227, 18%, 75%)\",\n                  borderBottom: i === rows.length - 1 ? \"none\" : \"1.5px solid #5e9a9e\",\n                  padding: \"6px 10px 6px 0px\",\n                  maxWidth: 80,\n                }}\n              >\n                {row.degree}\n              </TableCell>\n              <TableCell\n                style={{\n                  padding: 0,\n                  borderBottom: i === rows.length - 1 ? \"none\" : \"1.5px solid #5e9a9e\",\n                }}\n              >\n                <button\n                  onClick={() => removeTitle(row.title)}\n                  style={{\n                    width: 22,\n                    height: 20,\n                    fontSize: 20,\n                    marginTop: 2,\n                  }}\n                >\n                  <i className=\"icon ion-android-close\" />\n                </button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default Pages;\n","import React, { Suspense, useState, useRef, useMemo, useEffect } from \"react\";\nimport { Canvas, useFrame } from \"react-three-fiber\";\nimport { Stats, TrackballControls } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport _ from \"lodash\";\n\nimport Graph, { Id, Vertex, Edge, Degrees, Position } from \"./ts/graph\";\nimport { getLinks, getBacklinks } from \"./ts/wiki\";\nimport Node from \"./components/Node\";\nimport Link from \"./components/Link\";\nimport Input from \"./components/Input\";\nimport Pages from \"components/Pages\";\n\nconst makeVertex = (id: Id): Vertex => ({ id });\n\nasync function buildGraph(titles: string[]) {\n  let { vertices, edges } = (\n    await Promise.all(\n      titles.map(async (title) => {\n        let [links, backlinks] = await Promise.all([\n          // getLinks(title),\n          [],\n          getBacklinks(title),\n        ]);\n\n        return {\n          title,\n          links,\n          backlinks,\n        };\n      })\n    )\n  ).reduce(\n    ({ vertices, edges }, { title, links, backlinks }) => ({\n      vertices: [\n        ...vertices,\n        makeVertex(title),\n        ...backlinks.map(makeVertex),\n        // ...links.map(makeVertex),\n      ],\n      edges: [\n        ...edges,\n        ...backlinks.map((source) => ({\n          id: `${source}->${title}`,\n          source,\n          target: title,\n        })),\n        // ...links.map((target) => ({\n        //   id: `${title}->${target}`,\n        //   source: title,\n        //   target,\n        // })),\n      ],\n    }),\n    { vertices: [] as Vertex[], edges: [] as Edge[] }\n  );\n\n  let graph = new Graph(vertices, edges)\n    .calculateDegrees()\n    .filter((vertex) => vertex.degree > 1)\n    .calculateDegrees()\n    .map(\n      (vertex) => {\n        let radius = 5 + _.clamp(2 * vertex.degree, 0, 15);\n\n        let color = titles.includes(vertex.id)\n          ? \"#ffc831\"\n          : vertex.id === titles[titles.length - 1]\n          ? \"#ee3f0a\"\n          : \"#4adfd2\";\n\n        return {\n          ...vertex,\n          radius,\n          color,\n        } as Vertex & Degrees & { radius: number; color: string };\n      },\n      (edge, graph) => {\n        let source = graph.getVertex(edge.source);\n        let target = graph.getVertex(edge.target);\n\n        let weight = 0.1 + Math.min(source.degree, target.degree) / 12;\n\n        return {\n          ...edge,\n          weight,\n        } as Edge & { weight: number };\n      }\n    )\n    .layout(titles, { initialRadius: 1000 });\n\n  return graph;\n}\n\ntype UnwrapPromise<T> = T extends Promise<infer U> ? U : never;\n\ntype DisplayGraph = UnwrapPromise<ReturnType<typeof buildGraph>>;\n\nconst Scene = ({ graph }: { graph?: DisplayGraph }) => {\n  return (\n    <>\n      <ambientLight color=\"#ffffff\" intensity={0.1} />\n      <hemisphereLight color=\"#ffffff\" intensity={1.0} />\n      {graph && (\n        <>\n          {graph.vertices.map(({ id, radius, color, x, y }) => (\n            <Node key={id} label={id} radius={radius} color={color} position={[x, y]} />\n          ))}\n          {graph.edges.map(({ id, source, target, from, to, weight }) => (\n            <Link\n              key={id}\n              from={[from.x, from.y]}\n              to={[to.x, to.y]}\n              lineWidth={0.35 + weight / 10}\n            />\n          ))}\n        </>\n      )}\n    </>\n  );\n};\n\nexport type Data = {\n  [key: string]: {\n    in: number;\n    out: number;\n    degree: number;\n  };\n};\n\nconst App = () => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [graph, setGraph] = useState<DisplayGraph>();\n  const [titles, setTitles] = useState<string[]>([]);\n  const [data, setData] = useState<Data>();\n\n  useEffect(() => {\n    if (titles.length === 0) {\n      return;\n    }\n\n    const main = async () => {\n      let graph = await buildGraph(titles);\n      setGraph(graph);\n      setData(\n        titles.reduce((obj, title) => {\n          let vertex = graph.getVertex(title);\n\n          obj[title] = {\n            in: vertex?.inDegree || 0,\n            out: vertex?.outDegree || 0,\n            degree: vertex?.degree || 0,\n          };\n\n          return obj;\n        }, {} as Data)\n      );\n    };\n\n    main();\n  }, [titles]);\n\n  console.log(`graph`, graph);\n  console.log(`titles`, titles);\n\n  return (\n    <div style={{ width: \"100vw\", height: \"100vh\" }}>\n      <div\n        style={{\n          position: \"absolute\",\n          zIndex: 1,\n          width: \"100%\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginTop: 15,\n        }}\n      >\n        <Input\n          ref={inputRef}\n          onResultClick={(result) => {\n            if (titles.includes(result)) {\n              return;\n            }\n\n            setTitles((oldTitles) => [...oldTitles, result]);\n          }}\n        />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          zIndex: 1,\n          top: \"9vh\",\n          left: 15,\n        }}\n      >\n        <Pages\n          pages={titles.map((title) => ({ title }))}\n          data={data}\n          removeTitle={(title) =>\n            setTitles((oldTitles) => {\n              let newTitles = _.pull([...oldTitles], title);\n              return newTitles;\n            })\n          }\n        />\n      </div>\n      <Canvas\n        // concurrent\n        camera={{\n          position: [0, 0, 32],\n          near: 0.1,\n          far: 64,\n          zoom: 2,\n        }}\n        orthographic\n        onClick={() => {\n          inputRef.current?.blur();\n        }}\n        // invalidateFrameloop\n      >\n        <TrackballControls\n          mouseButtons={{\n            LEFT: THREE.MOUSE.PAN,\n            MIDDLE: THREE.MOUSE.MIDDLE,\n            RIGHT: THREE.MOUSE.ROTATE,\n          }}\n          noRotate\n          panSpeed={10}\n        />\n        <Stats />\n        <gridHelper />\n        <axesHelper />\n        <Suspense fallback={null}>\n          <Scene graph={graph} />\n        </Suspense>\n      </Canvas>\n    </div>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\n// (ReactDOM as any).unstable_createRoot(document.getElementById(\"root\")).render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>\n// );\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}