(this.webpackJsonpwikigraph=this.webpackJsonpwikigraph||[]).push([[0],{73:function(e,t,n){},93:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),i=n.n(a),c=n(26),o=n.n(c),s=(n(73),n(8)),u=n(12),l=n(13),d=n.n(l),p=n(9),f=n(22),h=n(19),b=n(134),j=n(131),g=n(2),x=n(15),v=n.n(x),O=n(3),m=n(7),y=n(25),w=n(56),k=new(n.n(w).a),M=function(e,t){return e.get(t)},S=function(e,t){e.set(t.id,t)},E=function(e,t){e.set(t.id,t)},D=function(e){var t,n=Object(y.a)(e.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;return M(e,r)}}catch(a){n.e(a)}finally{n.f()}},_=function(){function e(t,n){if(Object(O.a)(this,e),this._vertices=new Map,this._edges=new Map,t)if(t instanceof Map)this._vertices=t;else for(var r=0;r<t.length;r++){var a=t[r];this._vertices.set(a.id,a)}if(n)if(n instanceof Map)this._edges=n;else for(var i=0;i<n.length;i++){var c=n[i];this._edges.set(c.id,c)}}return Object(m.a)(e,[{key:"getVertex",value:function(e){return M(this._vertices,e)}},{key:"toJSON",value:function(){return{vertices:this.vertices,edges:this.edges}}},{key:"vertices",get:function(){return Object(u.a)(this._vertices.values())}},{key:"edges",get:function(){return Object(u.a)(this._edges.values())}}]),Object(m.a)(e,[{key:"map",value:function(t,n){var r=this,a=new Map,i=new Map;return this._edges.forEach((function(e){var c=M(r._vertices,e.source),o=M(r._vertices,e.target),s=t(c,r),u=t(o,r);S(a,s),S(a,u);var l=n?n(e,r):e;l.source=s.id,l.target=u.id,E(i,l)})),new e(a,i)}},{key:"filter",value:function(t){var n=this,r=new Map,a=new Map;return this._edges.forEach((function(e){var i=M(n._vertices,e.source),c=M(n._vertices,e.target),o=t(i),s=t(c);o&&S(r,i),s&&S(r,c),o&&s&&E(a,e)})),new e(r,a)}},{key:"calculateDegrees",value:function(){var t=new Map(this._vertices),n=new Map(this._edges);return t.forEach((function(e){["degree","inDegree","outDegree"].forEach((function(t){e[t]=0}))})),n.forEach((function(e){var n=M(t,e.source),r=M(t,e.target);n.outDegree+=1,n.degree+=1,r.inDegree+=1,r.degree+=1})),new e(t,n)}},{key:"layout",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialAngle:Math.PI*(3-Math.sqrt(5)),initialRadius:10},a=r.initialAngle,i=void 0===a?Math.PI*(3-Math.sqrt(5)):a,c=r.initialRadius,o=void 0===c?10:c,s=new Map(this._vertices),u=new Map(this._edges);if(0===s.size)return this;if(!(null===(n=D(s))||void 0===n?void 0:n.degree))throw new Error;var l=0,d=0;return s.forEach((function(e){if(e.degree>l&&(l=e.degree),t.includes(e.id)){var n=i*d,r=o*Math.sqrt(.5+d);e.x=r*Math.cos(n),e.y=r*Math.sin(n),d+=1}})),u.forEach((function(e){if(1===t.filter((function(t){return t===e.source||t===e.target})).length){var n=(t.includes(e.source)?[e.source,e.target]:[e.target,e.source]).map((function(e){return M(s,e)})),r=Object(p.a)(n,2),a=r[0],i=r[1];if(!i.x&&!i.y){var c=[v.a.random(0,2*Math.PI),k.normal({mean:o/4+Math.pow(a.degree,2)/Math.pow(l,2)*3,dev:.15})+i.inDegree/2],u=c[0],d=c[1];i.x=a.x+d*Math.cos(u),i.y=a.y+d*Math.sin(u)}}})),u.forEach((function(e){var t=M(s,e.source),n=M(s,e.target);t.x||t.y||(t.x=v.a.random(-o,o,!0),t.y=v.a.random(-o,o,!0)),n.x||n.y||(n.x=v.a.random(-o,o,!0),n.y=v.a.random(-o,o,!0)),e.from={x:t.x,y:t.y},e.to={x:n.x,y:n.y}})),new e(s,u)}}]),e}(),C=n(10),z=n(57),T=n.n(z),N=n(58),P=n.n(N),I=(n(59),function(e){return function(e){return!(!v.a.isPlainObject(e)&&!v.a.isArray(e))&&1===Object.keys(e).length}(e)?function(e){return e[Object.keys(e)[0]]}(e):e});function R(e){var t=v.a.mapValues(e,(function(e,t,n){return e instanceof Date?e.getTime():"boolean"===typeof e?!0===e?"":void 0:"minsize"===t||"maxsize"===t?parseInt(e):e}));return P.a.stringify(t,{arrayFormat:"separator",arrayFormatSeparator:"|"})}function B(){return F.apply(this,arguments)}function F(){return(F=Object(f.a)(d.a.mark((function e(){var t,n,r,a,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n="https://nl.wikipedia.org/w/api.php?"+R(Object(s.a)(Object(s.a)({},t),{},{action:t.action||"query",format:"json",formatversion:2,origin:"*",errorformat:"raw",utf8:!0})),e.next=4,T()(n,Object(s.a)({method:"GET",mode:"cors",credentials:"omit"},"undefined"===typeof window?{headers:{"User-Agent":"graph-builder (https://github.com/pocket-titan/; jelmargerritsen@gmail.com) wiki.ts"}}:{}));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("".concat(r.status,": ").concat(r.statusText));case 7:return e.next=9,r.json();case 9:if(!(a=e.sent).errors){e.next=12;break}throw new Error(JSON.stringify(a,null,2));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){return Object.entries(e).filter((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];return("limit"===n||"limit"===n.slice(1)||"limit"===n.slice(2)||"limit"===n.slice(3))&&"max"!==r&&("number"!==typeof r||r<500)})).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return n}))};function W(){return J.apply(this,arguments)}function J(){return(J=Object(f.a)(d.a.mark((function e(){var t,n,r,a,i,c,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=o.length>1&&void 0!==o[1]?o[1]:[],e.next=4,B(t);case 4:if(r=e.sent,n.push(r),!r.continue){e.next=14;break}if(a=Object.keys(r.continue).filter((function(e){return"continue"!==e}))[0],i=r.continue[a],c=L(t).map((function(e){return e.replace("limit","")})),[a.slice(0,1),a.slice(0,2),a.slice(0,3)].some((function(e){return c.includes(e)}))){e.next=14;break}return e.next=13,W(Object(s.a)(Object(s.a)({},t),{},Object(C.a)({},a,i)),n);case 13:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",I(n.flatMap((function(e){return I(v.a.isPlainObject(e)?e.query:e)}))));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=new Map;function q(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(d.a.mark((function e(){var t,n,r,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=JSON.stringify(t),!A.has(n)){e.next=4;break}return e.abrupt("return",JSON.parse(A.get(n)));case 4:return e.next=6,W(t);case 6:return r=e.sent,A.set(n,JSON.stringify(r)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return U.apply(this,arguments)}function U(){return(U=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({gbltitle:t,generator:"backlinks",gblnamespace:0,gbllimit:"max",gblredirect:!0});case 2:return n=e.sent,e.abrupt("return",(v.a.isPlainObject(n)?[n]:n).map(v.a.iteratee("title")));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(f.a)(d.a.mark((function e(t){var n,r,a,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({action:"opensearch",search:t,namespace:0,limit:5});case 2:return n=e.sent,r=Object(p.a)(n,4),a=r[1],i=r[2],c=r[3],o=v.a.zip(a,i,c).map((function(e){var t=Object(p.a)(e,3);return{title:t[0],summary:t[1],url:t[2]}})),e.abrupt("return",o.map(v.a.iteratee("title")));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=n(50),Q=n(121),X=function(e){var t=e.label,n=e.radius,i=void 0===n?40:n,c=e.position,o=void 0===c?[0,0]:c,s=e.color,l=void 0===s?"#4adfd2":s,d=Object(a.useState)(!1),f=Object(p.a)(d,2),h=f[0],b=f[1],j=Object($.b)({color:h?"#ff0066":l}).color;return Object(r.jsxs)("group",{position:[].concat(Object(u.a)(o),[0]),onPointerOver:function(e){e.stopPropagation(),b(!0)},onPointerOut:function(e){e.stopPropagation(),b(!1)},children:[Object(r.jsxs)("mesh",{children:[Object(r.jsx)("circleBufferGeometry",{attach:"geometry",args:[i,40]}),Object(r.jsx)($.a.meshStandardMaterial,{attach:"material",color:j})]}),h&&Object(r.jsx)(Q.a,{position:[i,0,0],scaleFactor:2,zIndexRange:[0,100],children:Object(r.jsx)("div",{style:{background:"white",padding:3,borderRadius:2},children:t})})]})},Y=n(133),Z=function(e){var t=e.from,n=e.to,a=e.lineWidth,i=void 0===a?1:a,c=e.color,o=void 0===c?"white":c;return Object(r.jsx)(Y.a,{points:[[].concat(Object(u.a)(t),[-1]),[].concat(Object(u.a)(n),[-1])],color:o,lineWidth:i,vertexColors:[[.2,.6,.9],[.7,.2,.1]]})},ee=(n(93),i.a.forwardRef((function(e,t){var n=e.onResultClick,i=void 0===n?function(){}:n,c=e.width,o=void 0===c?350:c,s=e.height,u=void 0===s?55:s,l=Object(a.useState)(""),h=Object(p.a)(l,2),b=h[0],j=h[1],g=Object(a.useState)([]),x=Object(p.a)(g,2),O=x[0],m=x[1],y=Object(a.useState)(!1),w=Object(p.a)(y,2),k=w[0],M=w[1],S=Object(a.useRef)(v.a.debounce(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,G(t);case 4:n=e.sent,m(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,M(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})));return function(t){return e.apply(this,arguments)}}(),1e3)),E=function(){j(""),m([]),S.current.cancel()};return Object(r.jsxs)("div",{style:{position:"relative",width:350},children:[Object(r.jsxs)("div",{className:"search",style:{height:u,display:"grid",gridTemplateRows:"".concat(u,"px"),gridTemplateColumns:"minmax(0, 1fr) 100px",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"},children:[Object(r.jsx)("input",{ref:t,type:"text",value:b,placeholder:"Search!",style:{fontSize:22},onChange:function(e){var t=e.target.value;j(t),0===t.length?(S.current.cancel(),m([])):S.current(t)},onKeyDown:function(e){switch(e.key){case"Enter":if(0===O.length)return;i(O[0]),E();break;case"Escape":E()}}}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:[b.length>0&&Object(r.jsx)("button",{className:"clear-button",onClick:function(){var e;E(),null===(e=t.current)||void 0===e||e.focus()},children:Object(r.jsx)("i",{className:"icon ion-android-close"})}),k?Object(r.jsx)("button",{disabled:!0,children:Object(r.jsx)("div",{className:"loader"})}):Object(r.jsx)("button",{className:"search-button",onClick:function(e){e.preventDefault(),b.length>0&&S.current.flush()},children:Object(r.jsx)("i",{className:"icon ion-android-search"})})]})]}),Object(r.jsx)("div",{className:"results",style:{zIndex:999,position:"absolute",top:"100%",width:o,overflow:"hidden",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"},children:O.map((function(e){return Object(r.jsx)("div",{className:"result",onClick:function(){i(e),E()},children:e.slice(0,b.length).toLowerCase()===b.toLowerCase()?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{style:{fontWeight:"bold"},children:e.slice(0,b.length)}),Object(r.jsx)("span",{children:e.slice(b.length)})]}):Object(r.jsx)("span",{children:e})},e)}))})]})}))),te=n(122),ne=n(126),re=n(130),ae=n(129),ie=n(124),ce=n(127),oe=n(128),se=n(132),ue=n(125);function le(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function de(e,t){return"desc"===e?function(e,n){return le(e,n,t)}:function(e,n){return-le(e,n,t)}}function pe(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var fe=Object(te.a)({root:{color:"red","&:hover":{color:"blue"},"&$active":{color:"green"}},active:{},icon:{color:"inherit !important"}}),he=function(e){var t=e.pages,n=e.data,i=e.removeTitle,c=Object(a.useState)("asc"),o=Object(p.a)(c,2),u=o[0],l=o[1],d=Object(a.useState)("index"),f=Object(p.a)(d,2),h=f[0],b=f[1],j=fe(),g=t.map((function(e){var t=e.title;return Object(s.a)({id:t,title:t},(null===n||void 0===n?void 0:n[t])||{in:0,out:0,degree:0})})),x=[{id:"title",label:"Title",align:"left"},{id:"in",label:"In",align:"right"},{id:"out",label:"Out",align:"right"},{id:"degree",label:"Degree",align:"right"}];return Object(r.jsx)(ie.a,{component:ue.a,style:{maxHeight:"40vh",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)",background:"var(--input-background)"},children:Object(r.jsxs)(ne.a,{stickyHeader:!0,style:{color:"hsl(227, 18%, 70%)",width:"unset"},children:[Object(r.jsx)(ce.a,{children:Object(r.jsxs)(oe.a,{children:[x.map((function(e,t){return Object(r.jsx)(ae.a,{align:e.align||"right",size:"small",style:Object(s.a)({borderBottom:0===g.length?"none":"1.5px solid #5e9a9e",padding:"6px ".concat(t===x.length-1?10:0,"px 6px ").concat(0===t?10:0,"px"),background:"var(--input-background)"},{maxWidth:0!==t?80:100}),children:Object(r.jsxs)(se.a,{active:h===e.id,direction:h===e.id?u:"asc",onClick:function(){return t=e.id,l(h===t&&"asc"===u?"desc":"asc"),void b(t);var t},classes:{root:j.root,active:j.active,icon:j.icon},style:{color:"hsl(227, 18%, 70%)"},children:[e.label,h===e.id?Object(r.jsx)("span",{style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},children:"desc"===u?"sorted descending":"sorted ascending"}):null]})},e.id)})),Object(r.jsx)(ae.a,{style:{width:25,padding:0,background:"var(--input-background)",borderBottom:0===g.length?"none":"1.5px solid #5e9a9e"}})]})}),Object(r.jsx)(re.a,{children:pe(g,de(u,h)).map((function(e,t){return Object(r.jsxs)(oe.a,{children:[Object(r.jsx)(ae.a,{component:"th",scope:"row",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 10px",maxWidth:100},children:e.title}),Object(r.jsx)(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",maxWidth:80},children:e.in}),Object(r.jsx)(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",maxWidth:80},children:e.out}),Object(r.jsx)(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 10px 6px 0px",maxWidth:80},children:e.degree}),Object(r.jsx)(ae.a,{style:{padding:0,borderBottom:t===g.length-1?"none":"1.5px solid #5e9a9e"},children:Object(r.jsx)("button",{onClick:function(){return i(e.title)},style:{width:22,height:20,fontSize:20,marginTop:2},children:Object(r.jsx)("i",{className:"icon ion-android-close"})})})]},e.title)}))})]})})},be=function(e){return{id:e}};function je(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(f.a)(d.a.mark((function e(t){var n,r,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([[],V(t)]);case 2:return n=e.sent,r=Object(p.a)(n,2),a=r[0],i=r[1],e.abrupt("return",{title:t,links:a,backlinks:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent.reduce((function(e,t){var n=e.vertices,r=e.edges,a=t.title,i=(t.links,t.backlinks);return{vertices:[].concat(Object(u.a)(n),[be(a)],Object(u.a)(i.map(be))),edges:[].concat(Object(u.a)(r),Object(u.a)(i.map((function(e){return{id:"".concat(e,"->").concat(a),source:e,target:a}}))))}}),{vertices:[],edges:[]}),r=n.vertices,a=n.edges,i=new _(r,a).calculateDegrees().filter((function(e){return e.degree>1})).calculateDegrees().map((function(e){var n=5+v.a.clamp(2*e.degree,0,15),r=t.includes(e.id)?"#ffc831":e.id===t[t.length-1]?"#ee3f0a":"#4adfd2";return Object(s.a)(Object(s.a)({},e),{},{radius:n,color:r})}),(function(e,t){var n=t.getVertex(e.source),r=t.getVertex(e.target),a=.1+Math.min(n.degree,r.degree)/12;return Object(s.a)(Object(s.a)({},e),{},{weight:a})})).layout(t,{initialRadius:1e3}),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(e){var t=e.graph;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ambientLight",{color:"#ffffff",intensity:.1}),Object(r.jsx)("hemisphereLight",{color:"#ffffff",intensity:1}),t&&Object(r.jsxs)(r.Fragment,{children:[t.vertices.map((function(e){var t=e.id,n=e.radius,a=e.color,i=e.x,c=e.y;return Object(r.jsx)(X,{label:t,radius:n,color:a,position:[i,c]},t)})),t.edges.map((function(e){var t=e.id,n=(e.source,e.target,e.from),a=e.to,i=e.weight;return Object(r.jsx)(Z,{from:[n.x,n.y],to:[a.x,a.y],lineWidth:.35+i/10},t)}))]})]})},ve=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(),n=Object(p.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)([]),s=Object(p.a)(o,2),l=s[0],x=s[1],O=Object(a.useState)(),m=Object(p.a)(O,2),y=m[0],w=m[1];return Object(a.useEffect)((function(){0!==l.length&&function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(l);case 2:t=e.sent,c(t),w(l.reduce((function(e,n){var r=t.getVertex(n);return e[n]={in:(null===r||void 0===r?void 0:r.inDegree)||0,out:(null===r||void 0===r?void 0:r.outDegree)||0,degree:(null===r||void 0===r?void 0:r.degree)||0},e}),{}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l]),console.log("graph",i),console.log("titles",l),Object(r.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[Object(r.jsx)("div",{style:{position:"absolute",zIndex:1,width:"100%",display:"flex",justifyContent:"center",marginTop:15},children:Object(r.jsx)(ee,{ref:e,onResultClick:function(e){l.includes(e)||x((function(t){return[].concat(Object(u.a)(t),[e])}))}})}),Object(r.jsx)("div",{style:{position:"absolute",zIndex:1,top:"9vh",left:15},children:Object(r.jsx)(he,{pages:l.map((function(e){return{title:e}})),data:y,removeTitle:function(e){return x((function(t){return v.a.pull(Object(u.a)(t),e)}))}})}),Object(r.jsxs)(h.a,{camera:{position:[0,0,32],near:.1,far:64,zoom:2},orthographic:!0,onClick:function(){var t;null===(t=e.current)||void 0===t||t.blur()},children:[Object(r.jsx)(b.a,{mouseButtons:{LEFT:g.MOUSE.PAN,MIDDLE:g.MOUSE.MIDDLE,RIGHT:g.MOUSE.ROTATE},noRotate:!0,panSpeed:10}),Object(r.jsx)(j.a,{}),Object(r.jsx)("gridHelper",{}),Object(r.jsx)("axesHelper",{}),Object(r.jsx)(a.Suspense,{fallback:null,children:Object(r.jsx)(xe,{graph:i})})]})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(ve,{})}),document.getElementById("root")),Oe()}},[[98,1,2]]]);
//# sourceMappingURL=main.01f99f9f.chunk.js.map