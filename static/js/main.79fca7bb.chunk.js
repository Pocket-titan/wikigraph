(this.webpackJsonpwikigraph=this.webpackJsonpwikigraph||[]).push([[0],{113:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(30),c=n.n(i),o=(n(89),n(9)),s=n(14),l=n(10),u=n.n(l),d=n(8),p=n(21),f=n(25),g=n(156),h=n(153),m=n(3),v=n(17),b=n.n(v),x=n(4),y=n(7),O=n(29),E=n(69),w=new(n.n(E).a),j=function(e,t){return e.get(t)},k=function(e,t){e.set(t.id,t)},M=function(e,t){e.set(t.id,t)},S=function(e){var t,n=Object(O.a)(e.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;return j(e,r)}}catch(a){n.e(a)}finally{n.f()}},D=function(){function e(t,n){if(Object(x.a)(this,e),this._vertices=new Map,this._edges=new Map,t)if(t instanceof Map)this._vertices=t;else for(var r=0;r<t.length;r++){var a=t[r];this._vertices.set(a.id,a)}if(n)if(n instanceof Map)this._edges=n;else for(var i=0;i<n.length;i++){var c=n[i];this._edges.set(c.id,c)}}return Object(y.a)(e,[{key:"getVertex",value:function(e){return j(this._vertices,e)}},{key:"toJSON",value:function(){return{vertices:this.vertices,edges:this.edges}}},{key:"vertices",get:function(){return Object(s.a)(this._vertices.values())}},{key:"edges",get:function(){return Object(s.a)(this._edges.values())}}]),Object(y.a)(e,[{key:"map",value:function(t,n){var r=this,a=new Map,i=new Map;return this._edges.forEach((function(e){var c=j(r._vertices,e.source),o=j(r._vertices,e.target),s=t(c,r),l=t(o,r);k(a,s),k(a,l);var u=n?n(e,r):e;u.source=s.id,u.target=l.id,M(i,u)})),new e(a,i)}},{key:"filter",value:function(t){var n=this,r=new Map,a=new Map;return this._edges.forEach((function(e){var i=j(n._vertices,e.source),c=j(n._vertices,e.target),o=t(i),s=t(c);o&&k(r,i),s&&k(r,c),o&&s&&M(a,e)})),new e(r,a)}},{key:"calculateDegrees",value:function(){var t=new Map(this._vertices),n=new Map(this._edges);return t.forEach((function(e){["degree","inDegree","outDegree"].forEach((function(t){e[t]=0}))})),n.forEach((function(e){var n=j(t,e.source),r=j(t,e.target);n.outDegree+=1,n.degree+=1,r.inDegree+=1,r.degree+=1})),new e(t,n)}},{key:"layout",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{initialAngle:Math.PI*(3-Math.sqrt(5)),initialRadius:10},a=r.initialAngle,i=void 0===a?Math.PI*(3-Math.sqrt(5)):a,c=r.initialRadius,o=void 0===c?10:c,s=new Map(this._vertices),l=new Map(this._edges);if(0===s.size)return this;if(!(null===(n=S(s))||void 0===n?void 0:n.degree))throw new Error;var u=0,p=0;return s.forEach((function(e){if(e.degree>u&&(u=e.degree),t.includes(e.id)){var n=i*p,r=o*Math.sqrt(.5+p);e.x=r*Math.cos(n),e.y=r*Math.sin(n),p+=1}})),l.forEach((function(e){if(1===t.filter((function(t){return t===e.source||t===e.target})).length){var n=(t.includes(e.source)?[e.source,e.target]:[e.target,e.source]).map((function(e){return j(s,e)})),r=Object(d.a)(n,2),a=r[0],i=r[1];if(!i.x&&!i.y){var c=[b.a.random(0,2*Math.PI),w.normal({mean:o/4+Math.pow(a.degree,2)/Math.pow(u,2)*3,dev:.15})+i.inDegree/2],l=c[0],p=c[1];i.x=a.x+p*Math.cos(l),i.y=a.y+p*Math.sin(l)}}})),l.forEach((function(e){var t=j(s,e.source),n=j(s,e.target);t.x||t.y||(t.x=b.a.random(-o,o,!0),t.y=b.a.random(-o,o,!0)),n.x||n.y||(n.x=b.a.random(-o,o,!0),n.y=b.a.random(-o,o,!0)),e.from={x:t.x,y:t.y},e.to={x:n.x,y:n.y}})),new e(s,l)}}]),e}(),_=n(13),C=n(70),z=n.n(C),T=n(71),N=n.n(T),P=(n(72),function(e){return function(e){return!(!b.a.isPlainObject(e)&&!b.a.isArray(e))&&1===Object.keys(e).length}(e)?function(e){return e[Object.keys(e)[0]]}(e):e});function R(e){var t=b.a.mapValues(e,(function(e,t,n){return e instanceof Date?e.getTime():"boolean"===typeof e?!0===e?"":void 0:"minsize"===t||"maxsize"===t?parseInt(e):e}));return N.a.stringify(t,{arrayFormat:"separator",arrayFormatSeparator:"|"})}function I(){return B.apply(this,arguments)}function B(){return(B=Object(p.a)(u.a.mark((function e(){var t,n,r,a,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n="https://nl.wikipedia.org/w/api.php?"+R(Object(o.a)(Object(o.a)({},t),{},{action:t.action||"query",format:"json",formatversion:2,origin:"*",errorformat:"raw",utf8:!0})),e.next=4,z()(n,Object(o.a)({method:"GET",mode:"cors",credentials:"omit"},"undefined"===typeof window?{headers:{"User-Agent":"graph-builder (https://github.com/pocket-titan/; jelmargerritsen@gmail.com) wiki.ts"}}:{}));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("".concat(r.status,": ").concat(r.statusText));case 7:return e.next=9,r.json();case 9:if(!(a=e.sent).errors){e.next=12;break}throw new Error(JSON.stringify(a,null,2));case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){return Object.entries(e).filter((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return("limit"===n||"limit"===n.slice(1)||"limit"===n.slice(2)||"limit"===n.slice(3))&&"max"!==r&&("number"!==typeof r||r<500)})).map((function(e){var t=Object(d.a)(e,2),n=t[0];t[1];return n}))};function L(){return W.apply(this,arguments)}function W(){return(W=Object(p.a)(u.a.mark((function e(){var t,n,r,a,i,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1&&void 0!==s[1]?s[1]:[],e.next=4,I(t);case 4:if(r=e.sent,n.push(r),!r.continue){e.next=14;break}if(a=Object.keys(r.continue).filter((function(e){return"continue"!==e}))[0],i=r.continue[a],c=F(t).map((function(e){return e.replace("limit","")})),[a.slice(0,1),a.slice(0,2),a.slice(0,3)].some((function(e){return c.includes(e)}))){e.next=14;break}return e.next=13,L(Object(o.a)(Object(o.a)({},t),{},Object(_.a)({},a,i)),n);case 13:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",P(n.flatMap((function(e){return P(b.a.isPlainObject(e)?e.query:e)}))));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=new Map;function A(){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(u.a.mark((function e(){var t,n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=JSON.stringify(t),!J.has(n)){e.next=4;break}return e.abrupt("return",JSON.parse(J.get(n)));case 4:return e.next=6,L(t);case 6:return r=e.sent,J.set(n,JSON.stringify(r)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({gbltitle:t,generator:"backlinks",gblnamespace:0,gbllimit:"max",gblredirect:!0});case 2:return n=e.sent,e.abrupt("return",(b.a.isPlainObject(n)?[n]:n).map(b.a.iteratee("title")));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return G.apply(this,arguments)}function G(){return(G=Object(p.a)(u.a.mark((function e(t){var n,r,a,i,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({action:"opensearch",search:t,namespace:0,limit:5});case 2:return n=e.sent,r=Object(d.a)(n,4),a=r[1],i=r[2],c=r[3],o=b.a.zip(a,i,c).map((function(e){var t=Object(d.a)(e,3);return{title:t[0],summary:t[1],url:t[2]}})),e.abrupt("return",o.map(b.a.iteratee("title")));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=n(62),$=n(142),Q=n(143),X=function(e){var t=e.label,n=e.radius,i=void 0===n?40:n,c=e.position,o=void 0===c?[0,0]:c,l=e.color,u=void 0===l?"#4adfd2":l,p=Object(r.useState)(!1),f=Object(d.a)(p,2),g=f[0],h=f[1],m=Object(K.useSpring)({color:g?"#ff0066":u}).color;return a.a.createElement("group",{position:[].concat(Object(s.a)(o),[0]),onPointerOver:function(e){e.stopPropagation(),h(!0)},onPointerOut:function(e){e.stopPropagation(),h(!1)}},a.a.createElement("mesh",null,a.a.createElement("circleBufferGeometry",{attach:"geometry",args:[i,40]}),a.a.createElement($.animated.meshStandardMaterial,{attach:"material",color:m})),g&&a.a.createElement(Q.a,{position:[i,0,0],scaleFactor:2,zIndexRange:[0,100]},a.a.createElement("div",{style:{background:"white",padding:3,borderRadius:2}},t)))},Y=n(155),Z=function(e){var t=e.from,n=e.to,r=e.lineWidth,i=void 0===r?1:r,c=e.color,o=void 0===c?"white":c;return a.a.createElement(Y.a,{points:[[].concat(Object(s.a)(t),[-1]),[].concat(Object(s.a)(n),[-1])],color:o,lineWidth:i,stencilMask:void 0,vertexColors:[[.2,.6,.9],[.7,.2,.1]]})},ee=(n(113),a.a.forwardRef((function(e,t){var n=e.onResultClick,i=void 0===n?function(){}:n,c=e.width,o=void 0===c?350:c,s=e.height,l=void 0===s?55:s,f=Object(r.useState)(""),g=Object(d.a)(f,2),h=g[0],m=g[1],v=Object(r.useState)([]),x=Object(d.a)(v,2),y=x[0],O=x[1],E=Object(r.useState)(!1),w=Object(d.a)(E,2),j=w[0],k=w[1],M=Object(r.useRef)(b.a.debounce(function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,U(t);case 4:n=e.sent,O(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,k(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})));return function(t){return e.apply(this,arguments)}}(),1e3)),S=function(){m(""),O([]),M.current.cancel()};return a.a.createElement("div",{style:{position:"relative",width:350}},a.a.createElement("div",{className:"search",style:{height:l,display:"grid",gridTemplateRows:"".concat(l,"px"),gridTemplateColumns:"minmax(0, 1fr) 100px",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"}},a.a.createElement("input",{ref:t,type:"text",value:h,placeholder:"Search!",style:{fontSize:22},onChange:function(e){var t=e.target.value;m(t),0===t.length?(M.current.cancel(),O([])):M.current(t)},onKeyDown:function(e){switch(e.key){case"Enter":if(0===y.length)return;i(y[0]),S();break;case"Escape":S()}}}),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},h.length>0&&a.a.createElement("button",{className:"clear-button",onClick:function(){var e;S(),null===(e=t.current)||void 0===e||e.focus()}},a.a.createElement("i",{className:"icon ion-android-close"})),j?a.a.createElement("button",{disabled:!0},a.a.createElement("div",{className:"loader"})):a.a.createElement("button",{className:"search-button",onClick:function(e){e.preventDefault(),h.length>0&&M.current.flush()}},a.a.createElement("i",{className:"icon ion-android-search"})))),a.a.createElement("div",{className:"results",style:{zIndex:999,position:"absolute",top:"100%",width:o,overflow:"hidden",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)"}},y.map((function(e){return a.a.createElement("div",{key:e,className:"result",onClick:function(){i(e),S()}},e.slice(0,h.length).toLowerCase()===h.toLowerCase()?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{style:{fontWeight:"bold"}},e.slice(0,h.length)),a.a.createElement("span",null,e.slice(h.length))):a.a.createElement("span",null,e))}))))}))),te=n(144),ne=n(148),re=n(152),ae=n(151),ie=n(146),ce=n(149),oe=n(150),se=n(154),le=n(147);function ue(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var de=Object(te.a)({root:{color:"red","&:hover":{color:"blue"},"&$active":{color:"green"}},active:{},icon:{color:"inherit !important"}}),pe=function(e){var t=e.pages,n=e.data,i=e.removeTitle,c=Object(r.useState)("asc"),s=Object(d.a)(c,2),l=s[0],u=s[1],p=Object(r.useState)("index"),f=Object(d.a)(p,2),g=f[0],h=f[1],m=de(),v=t.map((function(e){var t=e.title;return Object(o.a)({id:t,title:t},(null===n||void 0===n?void 0:n[t])||{in:0,out:0,degree:0})})),b=[{id:"title",label:"Title",align:"left"},{id:"in",label:"In",align:"right"},{id:"out",label:"Out",align:"right"},{id:"degree",label:"Degree",align:"right"}];return a.a.createElement(ie.a,{component:le.a,style:{maxHeight:"40vh",boxShadow:"0px 5px 10px rgba(0,0,0,0.19), 2px 2px 5px rgba(0,0,0,0.20)",background:"var(--input-background)"}},a.a.createElement(ne.a,{stickyHeader:!0,style:{color:"hsl(227, 18%, 70%)",width:"unset"}},a.a.createElement(ce.a,null,a.a.createElement(oe.a,null,b.map((function(e,t){return a.a.createElement(ae.a,{key:e.id,align:e.align||"right",size:"small",style:Object(o.a)({borderBottom:0===v.length?"none":"1.5px solid #5e9a9e",padding:"6px ".concat(t===b.length-1?10:0,"px 6px ").concat(0===t?10:0,"px"),background:"var(--input-background)"},{maxWidth:0!==t?80:100})},a.a.createElement(se.a,{active:g===e.id,direction:g===e.id?l:"asc",onClick:function(){return t=e.id,u(g===t&&"asc"===l?"desc":"asc"),void h(t);var t},classes:{root:m.root,active:m.active,icon:m.icon},style:{color:"hsl(227, 18%, 70%)"}},e.label,g===e.id?a.a.createElement("span",{style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}},"desc"===l?"sorted descending":"sorted ascending"):null))})),a.a.createElement(ae.a,{style:{width:25,padding:0,background:"var(--input-background)",borderBottom:0===v.length?"none":"1.5px solid #5e9a9e"}}))),a.a.createElement(re.a,null,function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}(v,function(e,t){return"desc"===e?function(e,n){return ue(e,n,t)}:function(e,n){return-ue(e,n,t)}}(l,g)).map((function(e,t){return a.a.createElement(oe.a,{key:e.title},a.a.createElement(ae.a,{component:"th",scope:"row",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===v.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 10px",maxWidth:100}},e.title),a.a.createElement(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===v.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",maxWidth:80}},e.in),a.a.createElement(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===v.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 0px 6px 0px",maxWidth:80}},e.out),a.a.createElement(ae.a,{align:"right",size:"small",style:{color:"hsl(227, 18%, 75%)",borderBottom:t===v.length-1?"none":"1.5px solid #5e9a9e",padding:"6px 10px 6px 0px",maxWidth:80}},e.degree),a.a.createElement(ae.a,{style:{padding:0,borderBottom:t===v.length-1?"none":"1.5px solid #5e9a9e"}},a.a.createElement("button",{onClick:function(){return i(e.title)},style:{width:22,height:20,fontSize:20,marginTop:2}},a.a.createElement("i",{className:"icon ion-android-close"}))))})))))},fe=function(e){return{id:e}};function ge(e){return he.apply(this,arguments)}function he(){return(he=Object(p.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([[],H(t)]);case 2:return n=e.sent,r=Object(d.a)(n,2),a=r[0],i=r[1],e.abrupt("return",{title:t,links:a,backlinks:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent.reduce((function(e,t){var n=e.vertices,r=e.edges,a=t.title,i=(t.links,t.backlinks);return{vertices:[].concat(Object(s.a)(n),[fe(a)],Object(s.a)(i.map(fe))),edges:[].concat(Object(s.a)(r),Object(s.a)(i.map((function(e){return{id:"".concat(e,"->").concat(a),source:e,target:a}}))))}}),{vertices:[],edges:[]}),r=n.vertices,a=n.edges,i=new D(r,a).calculateDegrees().filter((function(e){return e.degree>1})).calculateDegrees().map((function(e){var n=5+b.a.clamp(2*e.degree,0,15),r=t.includes(e.id)?"#ffc831":e.id===t[t.length-1]?"#ee3f0a":"#4adfd2";return Object(o.a)(Object(o.a)({},e),{},{radius:n,color:r})}),(function(e,t){var n=t.getVertex(e.source),r=t.getVertex(e.target),a=.1+Math.min(n.degree,r.degree)/12;return Object(o.a)(Object(o.a)({},e),{},{weight:a})})).layout(t,{initialRadius:1e3}),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(e){var t=e.graph;return a.a.createElement(a.a.Fragment,null,a.a.createElement("ambientLight",{color:"#ffffff",intensity:.1}),a.a.createElement("hemisphereLight",{color:"#ffffff",intensity:1}),t&&a.a.createElement(a.a.Fragment,null,t.vertices.map((function(e){var t=e.id,n=e.radius,r=e.color,i=e.x,c=e.y;return a.a.createElement(X,{key:t,label:t,radius:n,color:r,position:[i,c]})})),t.edges.map((function(e){var t=e.id,n=(e.source,e.target,e.from),r=e.to,i=e.weight;return a.a.createElement(Z,{key:t,from:[n.x,n.y],to:[r.x,r.y],lineWidth:.35+i/10})}))))},ve=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(),n=Object(d.a)(t,2),i=n[0],c=n[1],o=Object(r.useState)([]),l=Object(d.a)(o,2),v=l[0],x=l[1],y=Object(r.useState)(),O=Object(d.a)(y,2),E=O[0],w=O[1];return Object(r.useEffect)((function(){0!==v.length&&function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(v);case 2:t=e.sent,c(t),w(v.reduce((function(e,n){var r=t.getVertex(n);return e[n]={in:(null===r||void 0===r?void 0:r.inDegree)||0,out:(null===r||void 0===r?void 0:r.outDegree)||0,degree:(null===r||void 0===r?void 0:r.degree)||0},e}),{}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[v]),console.log("graph",i),console.log("titles",v),a.a.createElement("div",{style:{width:"100vw",height:"100vh"}},a.a.createElement("div",{style:{position:"absolute",zIndex:1,width:"100%",display:"flex",justifyContent:"center",marginTop:15}},a.a.createElement(ee,{ref:e,onResultClick:function(e){v.includes(e)||x((function(t){return[].concat(Object(s.a)(t),[e])}))}})),a.a.createElement("div",{style:{position:"absolute",zIndex:1,top:"9vh",left:15}},a.a.createElement(pe,{pages:v.map((function(e){return{title:e}})),data:E,removeTitle:function(e){return x((function(t){return b.a.pull(Object(s.a)(t),e)}))}})),a.a.createElement(f.a,{concurrent:!0,camera:{position:[0,0,32],near:.1,far:64,zoom:2},orthographic:!0,onClick:function(){var t;null===(t=e.current)||void 0===t||t.blur()}},a.a.createElement(g.a,{mouseButtons:{LEFT:m.MOUSE.PAN,MIDDLE:m.MOUSE.MIDDLE,RIGHT:m.MOUSE.ROTATE},noRotate:!0,panSpeed:10}),a.a.createElement(h.a,null),a.a.createElement("gridHelper",null),a.a.createElement("axesHelper",null),a.a.createElement(r.Suspense,{fallback:null},a.a.createElement(me,{graph:i}))))},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.unstable_createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ve,null))),be()},89:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.79fca7bb.chunk.js.map